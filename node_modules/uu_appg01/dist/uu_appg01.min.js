/*! uu_appg01, 3.2.2, 2018-01-08 14:52:20Z */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("module")):"function"==typeof define&&define.amd?define("UuApp",["module"],t):"object"==typeof exports?exports.UuApp=t(require("module")):e.UuApp=t(e.undefined)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(23),i=((r?r.uri:(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString();n.p=i.split(/\//).slice(0,-1).join("/")+"/",e.exports=n(25)},function(e,t){"use strict";function n(e){var t=this;if(!(t instanceof n))return new(n.bind.apply(n,arguments));var o=e;o&&"object"==("undefined"==typeof o?"undefined":i(o))||(o={message:arguments[0],cause:arguments[1]}),Object.assign(this,o),this.id||(this.id=r()),this.stack||(this.stack=(new Error).stack)}function r(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};try{"{}"==JSON.stringify(new Error)&&(Error.prototype.toJSON=function(){if(Object.hasOwnProperty(this,"toJSON"))return this;this.toJSON=function(){return this};var e="{}"==JSON.stringify(this);return delete this.toJSON,e?this.toString()+(null!=this.stack?"\n"+this.stack:""):this})}catch(e){}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Perflog=t.Util=t.Logging=t.Error=t.Uri=t.AppClient=void 0,n(37);var i=n(31),o=r(i),s=n(40),a=r(s),u=n(10),l=r(u),c=n(13),f=r(c),d=n(16),p=r(d),h=n(14),m=r(h);t.AppClient=o,t.Uri=a,t.Error=l,t.Logging=f,t.Util=p,t.Perflog=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),o=r(i),s=n(9),a=r(s),u={},l={getMetadata:function(e){var t=e.replace(/\/+$/,""),n=u[t];if(n)return n;var r=l.getMetadataUri(t);return u[t]=a.default.wrapForImmediateThen(o.default.get(r).catch(function(e){throw delete u[t],e}))},getMetadataUri:function(e){var t=e.replace(/\/+$/,"");return t+"/.well-known/openid-configuration"}};t.default=l},function(e,t,n){"use strict";function r(e){this._env={},e!==!1&&i.apply(this,arguments)}function i(e){if(this.initInvoked)throw new a("UuApp.Util.Config can be initialized only once (#init method). If a private / separate environment is needed, use new UuApp.Util.Config().");this.initInvoked=!0;var t;if("string"==typeof e)this.initUrl=arguments[0],t=o.apply(this,arguments);else if(null!=e&&"function"==typeof e.then)t={promise:Promise.resolve(e)};else{if(null!=e&&"object"!=("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e)throw new a("UuApp.Util.Config can be initialized only with object-like structure, but typeof says '"+("undefined"==typeof e?"undefined":s(e))+"'. Initialized with: "+JSON.stringify(e));t={immediateResult:e}}return t.immediateResult?(this._env=t.immediateResult,this.initComplete=!0,this.initPromise=Promise.resolve(this)):this.initPromise=t.promise.then(function(e){return this._env=e,this.initComplete=!0,this}.bind(this)),this.initPromise}function o(e,t){var n,r=new Promise(function(r,i){if(!e)return r({});var o=t||{},s=new XMLHttpRequest;s.open("GET",e,o.sync!==!0),s.setRequestHeader("Accept","application/json"),s.onerror=function(t){return i(new a("Unable to load environment configuration from "+e+" - network error."))},s.onload=function(t){if(s.status>=200&&s.status<300)try{return n=(s.responseText?JSON.parse(s.responseText):null)||{},void r(n||{})}catch(t){i(new a("Unable to load environment configuration from "+e+" - not a JSON. Response:\n"+s.responseText))}else i(new a("Unable to load environment configuration from "+e+" - status "+s.status+". Response:\n"+s.responseText))},s.send(null)});return{immediateResult:n,promise:r}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1);r.prototype.initInvoked=!1,r.prototype.initComplete=!1,r.prototype.initPromise=null,r.prototype.initUrl=null,r.prototype.get=function(e,t){if(0==arguments.length)return this._env;if(t===!1)return this._env[e];for(var n=e.split(/\./);n.length>1;){var r=this._env[n.join(".")];if(null!=r)return r;n.splice(n.length-2,1)}return this._env[n[0]]};var u=new r(!1);r.init=function(e){return i.apply(u,Array.prototype.slice.call(arguments)),f(),u.initPromise.then(l,c),u.initPromise},Object.defineProperties(r,{initInvoked:{get:function(){return u.initInvoked}},initComplete:{get:function(){return u.initComplete}},initPromise:{get:function(){return u.initPromise}},initUrl:{get:function(){return u.initUrl}}});var l,c;r.initCompletePromise=new Promise(function(e,t){return l=e,c=t});var f,d;r.initInvokedPromise=new Promise(function(e,t){return f=e,d=t}),r.get=function(){return u.get.apply(u,arguments)};var p=!1;if("undefined"!=typeof window){if("undefined"!=typeof System&&window&&System&&System.has&&System.get&&System.normalizeSync)try{var h=System.normalizeSync("UU_ENVIRONMENT");if(System.has(h)){var m=System.get(h);r.init(m.default||m),h.match(/\/UU_ENVIRONMENT$/)||(u.initUrl=h),p=!0}else h.match(/\/UU_ENVIRONMENT$/)||(r.init(System.import("UU_ENVIRONMENT")),u.initUrl=h,p=!0)}catch(e){console.error("Failed to initialize configuration from UU_ENVIRONMENT. Error:",e)}!p&&window.UU5&&window.UU5.Environment&&(r.init(window.UU5.Environment),p=!0)}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=document.createElement("a");return t.href=e,t.href.toString()}function s(e){return("0"+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2)+":"+("0"+e.getSeconds()).substr(-2)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=n(41),c=r(l),f=n(6),d=r(f),p=n(42),h=r(p),m=n(51),g=r(m),v=n(52),y=r(v),w=n(9),b=r(w),_=n(22),k=r(_),O=n(8),E=r(O),x=n(44),R=r(x),P=n(3),S=r(P),C=u.Error.Error,T=u.Logging.LoggerFactory.get("UuOidc.Session"),j=function(){function e(t){var n=this;if(i(this,e),!t)throw new C("Session must be initialized with proper options or UuApp.Util.Config.");this._optionsMergedPromise=b.default.wrapForImmediateThen(Promise.resolve(t&&"function"==typeof t.get?t.initPromise:t).then(function(e){if(Object.keys(c.default).forEach(function(t){var r=void 0;e&&"function"==typeof e.get?r=e.get("uuoidc."+t,!1):e&&(r=e[t]),null==r&&(r=c.default[t]),n["redirectUri"===t?"implicitFlowRedirectUri":t]=r}),n.clientId||(n.clientId="uu-oidc:unregistered-client:"+(0,g.default)()),!n.implicitFlowRedirectUri.match(/^[a-z]+:/i)){var t=o(document.baseURI||location.pathname).replace(/^([^?#]*\/).*/,"$1");"/"!=n.implicitFlowRedirectUri.charAt(0)?n.implicitFlowRedirectUri=o(t+n.implicitFlowRedirectUri):n.implicitFlowRedirectUri=o(n.implicitFlowRedirectUri)}("number"!=typeof n.sessionExpiringNotificationTime||n.sessionExpiringNotificationTime<0)&&(n.sessionExpiringNotificationTime=c.default.sessionExpiringNotificationTime),("number"!=typeof n.sessionCheckInterval||n.sessionCheckInterval<0)&&(n.sessionCheckInterval=c.default.sessionCheckInterval),n.sessionCheckInterval>0&&n.sessionCheckInterval<2&&(n.sessionCheckInterval=2),("number"!=typeof n.tokenRefreshLeeway||n.tokenRefreshLeeway<0)&&(n.tokenRefreshLeeway=c.default.tokenRefreshLeeway),("number"!=typeof n.tokenRefreshFailureRetryInterval||n.tokenRefreshFailureRetryInterval<0)&&(n.tokenRefreshFailureRetryInterval=c.default.tokenRefreshFailureRetryInterval),n.tokenRefreshFailureRetryInterval>0&&(n.tokenRefreshFailureRetryInterval=Math.max(5,n.tokenRefreshFailureRetryInterval)),n.sessionCheckInterval&&(n._sessionChecker=new R.default(n),n._sessionChecker.onStateChange(function(){T.debug("Session state change detected."),n.isAuthenticated()&&n._silentTokenRefresh(!0)}))})),this._loginInProgress=0,this._silentTokenRefreshInProgress=0,this.nonce=Math.random().toString(32).substr(2);var r={};this.addListener=function(e,t){var i=r[e];return i||(i=r[e]=[]),i.push(t),n.removeListener.bind(n,e,t)},this.removeListener=function(e,t){var n=r[e];if(!n)return!1;var i=n.indexOf(t);return i!=-1&&n.splice(i,1),i!=-1},this._runListeners=function(e,t){T.debug('Launching event "'+e+'."');var i=r[e];if(i){var o={type:e,data:t};i.forEach(function(e){return e.call(n,o)})}"identityChange"===e&&r.__identityChange&&r.__identityChange.forEach(function(e){return e.call(n,t)})},this.isAuthenticated=function(){return!!n._loginCtx},this.addIdentityChangeListener=this.addListener.bind(this,"__identityChange"),this.removeIdentityChangeListener=this.removeListener.bind(this,"__identityChange"),this.addListener("identityChange",function(e){var t=(n._loginCtx||{}).authResponse;t&&t.session_expires_in&&(t.session_expires_at||(t.session_expires_at=Math.floor(Date.now()/1e3)+Number(t.session_expires_in)))}),this.addListener("identityChange",function(e){n._autoLogoutTimeout&&(clearTimeout(n._autoLogoutTimeout),delete n._autoLogoutTimeout);var t=(n._loginCtx||{}).authResponse;if(t){var r=t.session_expires_at||(n.getClaims()||{}).exp;if(r){var i=(new Date).getTime(),o=Math.max(0,1e3*r-i);T.debug("Planning local auto-logout at "+s(new Date(i+o))+"."),n._autoLogoutTimeout=setTimeout(function(){delete n._autoLogoutTimeout,n._localLogout()},o)}}}),this.addListener("identityChange",function(e){if(n.tokenRefreshEnabled){n._sessionRefreshTimeout&&(clearTimeout(n._sessionRefreshTimeout),delete n._sessionRefreshTimeout);var t=n.getClaims(),r=(t||{}).exp;if(r){var i=(new Date).getTime(),o=Math.max(0,1e3*r-i-1e3*n.tokenRefreshLeeway);T.debug("Planning token auto-refresh at "+s(new Date(i+o))+"."),n._sessionRefreshTimeout=setTimeout(function(){delete n._sessionRefreshTimeout,n._silentTokenRefresh()},o)}}}),this.addListener("identityChange",function(e){var t=1e4,r=(n._loginCtx||{}).authResponse,i=n._activeSessionExpiresAtMillis&&r&&1e3*r.session_expires_at>n._activeSessionExpiresAtMillis+t;if(n._activeSessionExpiresAtMillis=r?1e3*r.session_expires_at:null,i){n._sessionExpiringBlocked=!1;var o=n._activeSessionExpiresAtMillis;setTimeout(function(){n._runListeners("sessionExtended",{expiresAt:o})},0)}});var a=void 0;this.addListener("identityChange",function(e){if(!(n.sessionExpiringNotificationTime<=0)){n._sessionExpiringTimeout&&(clearTimeout(n._sessionExpiringTimeout),delete n._sessionExpiringTimeout);var t=(n._loginCtx||{}).authResponse,r=(n.getClaims()||{}).sub;if(r!=a&&(n._sessionExpiringBlocked=!1),a=r,t&&t.session_expires_at&&!n._sessionExpiringBlocked){var i=1e3*t.session_expires_at,o=Date.now(),u=Math.max(0,i-o-1e3*n.sessionExpiringNotificationTime);T.debug("Planning sessionExpiring notification at "+s(new Date(o+u))+"."),n._sessionExpiringTimeout=setTimeout(function(){delete n._sessionExpiringTimeout,n._sessionExpiringBlocked=!0,n._runListeners("sessionExpiring",{expiresAt:i})},u)}}})}return a(e,[{key:"getIdentity",value:function(){return this._loginCtx?this._loginCtx.getIdentity():null}},{key:"getClaims",value:function(){return this._loginCtx?this._loginCtx.getClaims():null}},{key:"login",value:function(e){var t;return e&&(t=Object.keys(e).reduce(function(t,n){return t[k.default.toSnakeCase(n)]=e[n],t},{})),this._login(t)}},{key:"_login",value:function(t,n){var r,i=this,o=Object.assign({},t);"urn:ietf:params:oauth:token-type:jwt-uuos8"===o.token_type_hint&&(r=o.access_token,delete o.access_token,delete o.token_type_hint);var s=o.access_token;delete o.access_token;var a=function(){if(++i._loginInProgress,0==Object.keys(o).length&&(o.acr_values=1),!s&&i._loginCtx){var e=!0;(o.prompt||o.max_age||o.access_token)&&(e=!1);var t=(null!=o.acr_values?o.acr_values+"":"").split(/\s+/),a=i.getIdentity();if(t.every(function(e){return Number(e)>a.loginLevelOfAssurance})&&(e=!1),d.default.isAuthResponseExpired(i._loginCtx.authResponse)&&(e=!1),e)return--i._loginInProgress,Promise.resolve(i)}var u=s?{id_token:s}:null,l=s||r||"nonce"in o?o.nonce:i.nonce;o.nonce=l,delete o.state;var c=Promise.resolve(u||b.default.immediateThen(i._optionsMergedPromise,function(){if(r){var e=new y.default({serverUri:i.serverUri,clientId:i.clientId,redirectUri:i.implicitFlowRedirectUri});return e.grantExchangeToken({subject_token:r})}return o.state=Math.random().toString(32).substr(2),d.default.login({serverUri:i.serverUri,clientId:i.clientId,redirectUri:i.implicitFlowRedirectUri,loginParams:o})},function(e){return Promise.reject(e)}));return c.then(function(e){return i._optionsMergedPromise.then(function(){return d.default.validateAuthResponse(e,{serverUri:i.serverUri,clientId:i.clientId,loginParams:o})})}).then(function(e){var t=e.authResponse,r=e.claims;return n&&n({authResponse:t,claims:r})===!1||(i._loginCtx=new h.default(o,t,r),i._runListeners("identityChange",i.getIdentity())),i}).then(function(e){return--i._loginInProgress,e},function(e){return--i._loginInProgress,Promise.reject(e)})};return this!==e.currentSession||s||r||0!==Object.keys(o).length?a():b.default.immediateThen(e.initPromise,a)}},{key:"_silentTokenRefresh",value:function(e){var t=this;if(!e||!(this._silentTokenRefreshTimeout||this._silentTokenRefreshInProgress>0)){this._silentTokenRefreshTimeout&&(clearTimeout(this._silentTokenRefreshTimeout),delete this._silentTokenRefreshTimeout);var n=0,r=function e(){if(t.isAuthenticated())return T.debug("Silent token refresh - starting."),++t._silentTokenRefreshInProgress,++n,t._login({acr_values:"1",prompt:"none"},function(e){var n=e.claims;return--t._silentTokenRefreshInProgress,t.isAuthenticated()?n.sub!==t.getClaims().sub?(T.debug("Silent token refresh - ending with local logout (user that is logged in on remote is different from the local one)."),t._localLogout(),!1):(T.debug("Silent token refresh - ending with token renewed."),!0):(T.debug("Silent token refresh - ending with no-op (local session is already logged out)."),!1)}).catch(function(r){var i=r&&r.error?r.error:r;return d.default.isLoggedOutError(r)?(T.debug("Silent token refresh - ending with local logout (user is not logged in on remote)."),void t._localLogout()):(!t._silentTokenRefreshTimeout&&t.tokenRefreshFailureRetryInterval?(T.debug("Silent token refresh - will retry in "+t.tokenRefreshFailureRetryInterval+"s (operation ended with unexpected error).",{error:i}),t._silentTokenRefreshTimeout=setTimeout(function(){delete t._silentTokenRefreshTimeout,e()},1e3*t.tokenRefreshFailureRetryInterval)):t._silentTokenRefreshTimeout?T.debug("Silent token refresh - ending current run with no-op (operation ended with unexpected error and another retry is already planned).",{error:i}):T.debug("Silent token refresh - ending with no-op (operation ended with unexpected error).",{error:i}),void(1===n?console.warn("Token refresh failed with error:",i):2===n&&console.warn("Suppressing further notifications of token refresh problem to prevent log cluttering (until success or logout).")))})};r()}}},{key:"_localLogout",value:function(){T.debug("Performing local-logout."),this._loginCtx&&(delete this._loginCtx,this._runListeners("identityChange",this.getIdentity()))}},{key:"logout",value:function(){var e=this;return this._loginCtx?this._optionsMergedPromise.then(function(){return S.default.getMetadata(e.serverUri).then(function(t){return new Promise(function(n,r){if(!e._loginCtx)return n();var i=e.implicitFlowRedirectUri,o=t.end_session_endpoint+"?post_logout_redirect_uri="+encodeURIComponent(i)+"&id_token_hint="+encodeURIComponent(e._loginCtx.authResponse.id_token);new E.default({url:o,onResult:function(t){t instanceof Error?(t.message="Logout failed."+(t.message?" "+t.message:""),r(t)):(e._localLogout(),n())}}).render()})})}):Promise.resolve()}},{key:"getCallToken",value:function(e){var t=(this._loginCtx||{}).authResponse;if(!t)return null;var n={tokenType:t.token_type||null,token:t.id_token||null};return n}}]),e}();t.default=j;var U,A=!0;Object.defineProperty(j,"currentSession",{get:function(){return A&&!U&&(U=new j(u.Util.Config),U.initComplete=!1,U.initPromise=j.initPromise),U},set:function(e){A=!1,U=e}});var I;j.initPromise=b.default.wrapForImmediateThen(new Promise(function(e,t){I=function(t,n){return j.initComplete=!0,j.currentSession.initComplete=!0,t||console.log("Session initialization failed:",n),e(j.currentSession),j.initPromise}})),j.initPromise._finalizeInit=I,j.initComplete=!1},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(3),s=r(o),a=n(9),u=r(a),l=n(50),c=r(l),f=n(8),d=r(f),p=n(47),h=r(p),m=n(7),g=r(m),v=n(46),y=r(v),w=300,b={login:function(e){var t=e||{},n=t.serverUri;if(!n)throw new Error("ImplicitFlow.login requires option 'serverUri'.");var r=t.clientId;if(!r)throw new Error("ImplicitFlow.login requires option 'clientId'.");var i=t.redirectUri;if(!i)throw new Error("ImplicitFlow.login requires option 'redirectUri'.");return u.default.immediateThen(s.default.getMetadata(n),function(e){var n=Object.assign({scope:"openid"},t.loginParams,{response_type:"id_token token",client_id:r,redirect_uri:i}),o=[];for(var s in n){var a=n[s];null!=a&&o.push(encodeURIComponent(s)+"="+encodeURIComponent(a+""))}var u=e.authorization_endpoint+"?"+o.join("&"),l=t.loginVisualComponent||("none"!=n.prompt?c.default:d.default);return new Promise(function(e,t){new l({url:u,onResult:function(n){var r=b.getAuthResponseFromCallback(n);return r===!1?t(new Error("User refused to log in.")):r===c.default.ERROR_POPUP_BLOCKED?t(new Error("Login failed due to popup blocking.")):void(r.error?t(r):e(r))}}).render()})},function(e){return Promise.reject(e)})},validateAuthResponse:function(e,t){if(t.loginParams.state&&e.state!==t.loginParams.state)throw new Error("Invalid 'state' in received authorization response. Expected "+t.loginParams.state+" but got "+e.state+". Response: "+JSON.stringify(e));if(b.isAuthResponseExpired(e))throw new Error("Token expired "+JSON.stringify(e));return b.validateIdToken(e.id_token,t).then(function(t){return{authResponse:e,claims:t}})},isAuthResponseExpired:function(e){var t=(new Date).getTime()/1e3,n=60,r=!1;return e.issued_at||(e.issued_at=t),e.expires_at&&(r=r||e.expires_at<t-n),e.expires_in&&e.issued_at&&(r=r||Number(e.expires_in)+Number(e.issued_at)<t-n),r},isLoggedOutError:function(e){return e&&"object"==("undefined"==typeof e?"undefined":i(e))&&"string"==typeof e.error_description&&e.error_description.match(/interaction/i)&&e.error_description.match(/required/i)},validateIdToken:function(e,t){var n=t.serverUri,r=t.loginParams.nonce;return s.default.getMetadata(n).then(function(t){var i={alg:["RS256"],iss:[t.issuer],gracePeriod:w};return h.default.decode(e,i,function(r){if(!r.alg||!r.alg.match(/^RS\d+$/))throw new Error("Invalid token. Only RSA signature is supported, but token uses algorithm '"+r.alg+"'. Token: "+e);var i="RSA",o=t.id_token_signing_alg_values_supported||[];if(o.indexOf(r.alg)==-1)throw new Error("Invalid token. Token was signed using algorithm '"+r.alg+"' but the OIDC server '"+n+"' supports only "+JSON.stringify(o)+". Token: "+e);var s=new y.default({serverUri:n});return s.getKey(r.kid,i).catch(function(t){throw new Error("Invalid token. Unable to match key from JWT header to list of keys used by OpenID Connect server "+n+". Token: "+e,t)})}).then(function(e){if(r&&e.nonce!==r)throw new g.default("Invalid nonce in ID token claims. Expected "+r+" but got "+e.nonce);return e})})},getAuthResponseFromCallback:function(e){if(e===!1||e===c.default.ERROR_POPUP_BLOCKED)return e;if(e instanceof Error)return{error:e};var t={};return e.replace(/^[^#]*#?/,"").split(/&/).forEach(function(e){var n=e.indexOf("="),r=decodeURIComponent((n==-1?e.substr(0):e.substr(0,n)).replace(/\+/g," ")),i=decodeURIComponent((n==-1?"":e.substr(n+1)).replace(/\+/g," "));t[r]=i}),t}};t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(s.Error.Error);t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),s=n(2),a=function(e){var t=Object.assign({},e),n={iframe:null};Object.defineProperty(n,"loginWindow",{get:function(){try{return null!=n.iframe?n.iframe.contentWindow:null}catch(e){}return null}}),o.default.registerForCallback(this,n),this.finalize=function(e){this.finalize=function(){},this.destroy(),t.onResult&&t.onResult(e)}.bind(this),this.render=function(){var e=this;n.iframe||(n.iframe=document.createElement("iframe"),n.iframe.style.cssText="position: absolute;top: -300px; left: -300px; width: 200px; height: 200px; opacity: 0;",n.iframe.src=t.url,n.iframe.onload=function(){return e.finalize(new Error("OIDC iframe doesn't contain proper callback HTML page - check that your network is up & running. Alternatively, an error might have happened on OIDC server while processing URL "+t.url+" or the application sent wrong redirect_uri."))},n.iframe.onerror=function(){return e.finalize(new Error("OIDC iframe doesn't contain proper callback HTML page - check that your network is up & running. Alternatively, an error might have happened on OIDC server while processing URL "+t.url+" or the application sent wrong redirect_uri."))},document.body.appendChild(n.iframe),t.timeout&&(this._timeout=setTimeout(function(){e.finalize(new s.Error.TimeoutError("OIDC iframe didn't receive callback within "+t.timeout+"s."))},1e3*t.timeout)))},this.destroy=function(){n.iframe&&n.iframe.parentNode&&n.iframe.parentNode.removeChild(n.iframe),this.destroy=function(){},this._timeout&&clearTimeout(this._timeout),o.default.unregisterForCallback(this)}};t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={wrapForImmediateThen:function(e){return e.then(function(t){return e._immediateValue=t},function(t){return e._immediateError=t}),e},immediateThen:function(e,t,n){if("_immediateValue"in e)return"function"==typeof t?t(e._immediateValue):e._immediateValue;if("_immediateError"in e){if("function"==typeof n)return n(e._immediateError);throw e._immediateError}return e.then(t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=t.RemoteError=t.NetworkError=t.AbortError=t.Error=void 0;var i=n(1),o=r(i),s=n(32),a=r(s),u=n(33),l=r(u),c=n(34),f=r(c),d=n(35),p=r(d);t.Error=o.default,t.AbortError=a.default,t.NetworkError=l.default,t.RemoteError=f.default,t.TimeoutError=p.default},function(e,t,n){"use strict";function r(e){var t=this;if(!u.allowLoggerNew)throw new Error("Use UuApp.Logging.LoggerFactory.get(name) to get an instance of Logger.");this.name=e;var n=!1;this._buffer=[],Object.defineProperty(this,"ready",{get:function(){return n&&(!a.initInvoked||a.initComplete)},set:function(e){n=e,n&&s.call(t)}})}function i(e){var t=this.name+": "+e.message;r.console[c[e.level].toLowerCase()].apply(r.console,[t].concat(e.args))}function o(e,t){this._buffer.push({method:e,args:t})}function s(){var e=this,t=this._buffer;this._buffer=[],t.forEach(function(t){return e[t.method].apply(e,t.args)})}var a=n(4),u=r.priv={},l={DEBUG:100,INFO:200,WARN:300,ERROR:400,OFF:Math.MAX_VALUE},c=Object.keys(l).reduce(function(e,t){return e[l[t]]=t,e},{});Object.keys(l).forEach(function(e){r["LEVEL_"+e.toUpperCase()]=l[e]}),r.prototype.setLevel=function(e){null==e&&(e=r.LEVEL_WARN);var t="string"==typeof e?l[e.toUpperCase()]:Number(e);"number"!=typeof t||isNaN(t)||(this.level=t)},r.prototype.getLevel=function(){return this.level},r.prototype.getLevelName=function(){return c[this.level]},r.prototype.level=l.WARN,r.prototype.debug=function(){return this.ready?void(this.level<=l.DEBUG&&i.call(this,{level:l.DEBUG,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"debug",Array.prototype.slice.call(arguments))},r.prototype.isDebugLoggable=function(){return!this.ready||this.level<=l.DEBUG},r.prototype.info=function(){return this.ready?void(this.level<=l.INFO&&i.call(this,{level:l.INFO,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"info",Array.prototype.slice.call(arguments))},r.prototype.isInfoLoggable=function(){return!this.ready||this.level<=l.INFO},r.prototype.warn=function(){return this.ready?void(this.level<=l.WARN&&i.call(this,{level:l.WARN,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"warn",Array.prototype.slice.call(arguments))},r.prototype.isWarnLoggable=function(){return!this.ready||this.level<=l.WARN},r.prototype.error=function(){return this.ready?void(this.level<=l.ERROR&&i.call(this,{level:l.ERROR,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"error",Array.prototype.slice.call(arguments))},r.prototype.isErrorLoggable=function(){return!this.ready||this.level<=l.ERROR},r.console=console,e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=n.get(e.name+".logLevel",t!==!1);e.setLevel(r),e.ready=!0}var i=n(11),o=n(4),s={},a={},u=i.priv;a.get=function(e,t){if("string"!=typeof e)throw new Error("LoggerFactory.get() must be called with a string argument (logger name).");if(s[e])return s[e].logger;u.allowLoggerNew=!0;var n;try{n=new i(e),o.initInvoked&&!o.initComplete||r(n,t,o)}finally{u.allowLoggerNew=!1}return(s[e]={logger:n,hierarchical:t}).logger},i.getRootLogger=function(){return l},u.allowLoggerNew=!0,s[""]={logger:new i(""),hierarchical:!1};var l=s[""].logger;u.allowLoggerNew=!1,o.initComplete||(o.initInvokedPromise.then(function(){for(var e in s)s[e].logger.ready=!1}),o.initCompletePromise.then(function(e){for(var t in s)r(s[t].logger,s[t].hierarchical,e)})),e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFactory=t.Logger=void 0;var i=n(11),o=r(i),s=n(12),a=r(s);t.Logger=o.default,t.LoggerFactory=a.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PerfLog=void 0;var i=n(36),o=r(i);t.PerfLog=o.default},function(e,t,n){"use strict";function r(e,t,n,r,a,u,l,c,f,d,p){function h(e){return function(){throw new i("Cannot set "+e+" on Uri because instances of Uri are immutable. Use UriBuilder instead.")}}function m(){if(void 0!==O)return O;if(null==k.gateway||null==k.product||null==k.workspace)throw new i("Insufficient URI - at least one of gateway, product and workspace is not set. Uri: "+k.toString());return O=k.Builder.parse(k).set({useCase:null}).clearParameters().toUri()}function g(){return void 0!==E?E:E=k.Builder.parse(k).set({gateway:null}).toUri()}var v=this;if(!o.allowNew)throw new i("Use UuApp.Uri.Uri.parse to obtain an instance of uuUri.");d=d?d.replace(/^\//,""):d,n&&"number"!=typeof n&&(n=parseInt(n+"",10)),null!=n&&""!==n||!e||(n=e.match(/^https$/)?443:80);var y={value:s,lazyGet:function(){return y.value!==s?y.value:y.value=v.Builder.formatGateway(e,t,n)}},w={value:s,lazyGet:function(){return w.value!==s?w.value:w.value=v.Builder.formatProduct(r,a,u,l)}},b={value:s,lazyGet:function(){return b.value!==s?b.value:b.value=v.Builder.formatWorkspace(c,f)}},_=Object.assign({},p),k=this;Object.defineProperties(this,{scheme:{get:function(){return e},set:h("scheme")},hostname:{get:function(){return t},set:h("hostname")},port:{get:function(){return n},set:h("port")},gateway:{get:y.lazyGet,set:h("gateway")},vendor:{get:function(){return r},set:h("vendor")},app:{get:function(){return a},set:h("app")},subApp:{get:function(){return u},set:h("subApp")},spp:{get:function(){return l},set:h("spp")},product:{get:w.lazyGet,set:h("product")},tid:{get:function(){return c},set:h("tid")},awid:{get:function(){return f},set:h("awid")},workspace:{get:b.lazyGet,set:h("workspace")},useCase:{get:function(){return d},set:h("useCase")},parameters:{get:function(){return Object.assign({},_)},set:h("parameters")},baseUri:{get:m,set:h("baseUri")},relativeUri:{get:g,set:h("relativeUri")}});var O,E,x;this.toString=function(){return void 0!==x?x:x=v.Builder.format(v)},this.toJSON=this.toString,Object.freeze(this)}var i=n(1),o=r.priv={},s={};r.prototype.join=function(){if(arguments.length<=0)return this;for(var e=this.gateway||"",t=this.toString().substr(e.length),n=0;n<arguments.length;++n){var i=arguments[n];i&&(t=t.replace(/[?#].*/,""),i=i.replace(/((^|\/)\.\.?)$/,"$1/"),"/"==i.charAt(0)?t=i:i.match(/^\+(\/|$)/)?t=t.replace(/\/?$/,"/")+i:"/"==t.charAt(t.length-1)?t+=i:t=t.replace(/(^|\/)[^\/]*$/,"$1")+i)}var o=[];t.split("/").forEach(function(e){".."===e?o.pop():"."!==e&&"+"!==e&&o.push(e)}),""!==o[0]&&o.unshift("");var s=o.join("/");return r.parse(e+s)},r.prototype.equals=function(e){return this.toString()===(e||"").toString()},r.parse=function(e){return e instanceof r?e:r.prototype.Builder.parse(e).toUri()},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i=n(4),o=r(i);t.Config=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SessionHandler=t.Session=void 0;var i=n(5),o=r(i),s=n(43),a=r(s);n(45),"undefined"!=typeof window&&(window.UuOidc={Session:o.default,SessionHandler:a.default}),t.Session=o.default,t.SessionHandler=a.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="uuOidcCallbackFn";"undefined"==typeof window||window[n]||(window[n]=function(e,t){for(var r=window[n].loginWindows,i=0;i<r.length;++i){var o=r[i];if(o.state.loginWindow==t)return void o.component.finalize(e)}console.warn("Received unexpected callback from window",t,"Passed result was:",e,"Ignoring the callback.")},window[n].loginWindows=[]),t.default={registerForCallback:function(e,t){window[n].loginWindows.push({component:e,state:t})},unregisterForCallback:function(e){for(var t=window[n].loginWindows,r=0;r<t.length;++r)if(t[r].component===e){t.splice(r,1);break}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={encodeAscii:function(e){
return e?btoa(e).replace(/\+/g,"-").replace(/\//g,"_"):e},encode:function(e){return e?n.encodeAscii(unescape(encodeURIComponent(e))):e},decodeToAscii:function(e){if(!e)return null;var t=e.replace(/-/g,"+").replace(/_/g,"/");return atob(t)},decode:function(e){var t=n.decodeToAscii(e);return null!=t?decodeURIComponent(escape(t)):null}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Function("try {return this===window;}catch(e){ return false;}")(),r=n?"interactive"===document.readyState||"complete"===document.readyState?Promise.resolve():new Promise(function(e){document.addEventListener("DOMContentLoaded",e,!1)}):Promise.resolve();t.default={domReady:r}},function(e,t){"use strict";function n(e,t,n,r){return new Promise(function(i,o){var s=new XMLHttpRequest;s.open(e,t,!0),s.withCredentials=!0,s.setRequestHeader("Accept","application/json"),s.onreadystatechange=function(e){if(4==s.readyState)if(s.status>=200&&s.status<300)try{var t=JSON.parse(s.responseText);i(t)}catch(e){o(e)}else o(new Error("Server responded with status "+s.status))},s.withCredentials=!0,r&&r(s),s.send(n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(){return n.bind(this,"GET").apply(this,Array.prototype.slice.call(arguments))},post:function(){return n.bind(this,"POST").apply(this,Array.prototype.slice.call(arguments))}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toSnakeCase:function(e){return(e||"").replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})}}},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){s.AppClient.Client.apply(this,arguments),this.defaults=i.defaults}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=r(o),a=n(17);i.prototype=Object.create(s.AppClient.Client.prototype),i.prototype.constructor=i;var u;i.get=function(){return u||(u=new i),u.get.apply(u,arguments)},i.post=function(e,t,n){return u||(u=new i),u.post.apply(u,arguments)};var l=function(){};l.prototype=s.AppClient.Client.defaults,i.defaults=new l;var c=[].concat(s.AppClient.Client.defaults.interceptors);c.splice(c.indexOf(s.AppClient.Client.UriHandler)+1,0,a.SessionHandler),i.defaults.interceptors=c,t.default=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(2),s=r(o),a=n(17),u=r(a),l=window.UuApp=window.UuApp||{};for(var c in s)l[c]=s[c];var f=window.UuOidc=window.UuOidc||{};for(var c in u)f[c]=u[c]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=n(2);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(24),s=r(o);t.Client=s.default},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,s,a=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(a[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var c=0;c<s.length;c++)o.call(r,s[c])&&(a[s[c]]=r[s[c]])}}return a}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){G=e}function s(e){X=e}function a(){return function(){return t.nextTick(d)}}function u(){return"undefined"!=typeof K?function(){K(d)}:f()}function l(){var e=0,t=new Z(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<H;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}H=0}function p(){try{var e=n(53);return K=e.runOnLoop||e.runOnContext,u()}catch(e){return f()}}function h(e,t){var n=arguments,r=this,i=new this.constructor(g);void 0===i[ie]&&M(i);var o=r._state;return o?!function(){var e=n[o-1];X(function(){return U(o,i,e,r._result)})}():S(r,i,e,t),i}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return E(n,e),n}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return ue.error=e,ue}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function _(e,t,n){X(function(e){var r=!1,i=b(n,t,function(n){r||(r=!0,t!==n?E(e,n):R(e,n))},function(t){r||(r=!0,P(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,P(e,i))},e)}function k(e,t){t._state===se?R(e,t._result):t._state===ae?P(e,t._result):S(t,void 0,function(t){return E(e,t)},function(t){return P(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===m?k(e,t):n===ue?P(e,ue.error):void 0===n?R(e,t):i(n)?_(e,t,n):R(e,t)}function E(t,n){t===n?P(t,v()):e(n)?O(t,n,w(n)):R(t,n)}function x(e){e._onerror&&e._onerror(e._result),C(e)}function R(e,t){e._state===oe&&(e._result=t,e._state=se,0!==e._subscribers.length&&X(C,e))}function P(e,t){e._state===oe&&(e._state=ae,e._result=t,X(x,e))}function S(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+se]=n,i[o+ae]=r,0===o&&e._state&&X(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?U(n,r,i,o):i(o);e._subscribers.length=0}}function T(){this.error=null}function j(e,t){try{return e(t)}catch(e){return le.error=e,le}}function U(e,t,n,r){var o=i(n),s=void 0,a=void 0,u=void 0,l=void 0;if(o){if(s=j(n,r),s===le?(l=!0,a=s.error,s=null):u=!0,t===s)return void P(t,y())}else s=r,u=!0;t._state!==oe||(o&&u?E(t,s):l?P(t,a):e===se?R(t,s):e===ae&&P(t,s))}function A(e,t){try{t(function(t){E(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}function I(){return ce++}function M(e){e[ie]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[ie]||M(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):P(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function F(e){return new N(this,e).promise}function J(e){var t=this;return new t(V(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function W(e){var t=this,n=new t(g);return P(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e){this[ie]=I(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&z(),this instanceof $?A(this,e):D())}function q(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=$}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V=B,H=0,K=void 0,G=void 0,X=function(e,t){ne[H]=e,ne[H+1]=t,H+=2,2===H&&(G?G(d):re())},Y="undefined"!=typeof window?window:void 0,Q=Y||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():Z?l():te?c():void 0===Y?p():f();var ie=Math.random().toString(36).substring(16),oe=void 0,se=1,ae=2,ue=new T,le=new T,ce=0;return N.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===oe&&n<e;n++)this._eachEntry(t[n],n)},N.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var i=w(e);if(i===h&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===$){var o=new n(g);O(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},N.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===oe&&(this._remaining--,e===ae?P(r,n):this._result[t]=n),0===this._remaining&&R(r,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;S(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},$.all=F,$.race=J,$.resolve=m,$.reject=W,$._setScheduler=o,$._setAsap=s,$._asap=X,$.prototype={constructor:$,then:h,catch:function(e){return this.then(null,e)}},$.polyfill=q,$.Promise=$,$})}).call(t,n(28),function(){return this}())},function(e,t,n){"use strict";function r(e){this.options=e||{},this.options.headers=i(this.options.headers)}function i(e){if(!e||"object"!=("undefined"==typeof e?"undefined":f(e)))return null;var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}function o(e,t,n){function r(r){if(null==o){var s="gatewayUri";o=r?r.get(s):null,null==o&&(o="https://uuappg01.plus4u.net")}return o&&(e.uri=o.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,"")),n(e,t)}var i=(e.uri||"").toString();if(e.uri=i,i.match(/^https?:/i))return n(e,t);var o=t.gatewayUri;return null==o?Promise.resolve(p.Config.initPromise).then(r):r()}function s(e,t,n){function r(e,t){if(t.status>=400){var n=t.data;if(n&&"object"===("undefined"==typeof n?"undefined":f(n))&&"uuAppErrorMap"in n){var r=n.uuAppErrorMap,i=null;if(r)for(var o in r)if(r[o]&&"error"===r[o].type){i=o;break}i&&(t.error=new d.RemoteError(Object.assign({},r[i],{code:o})))}return Promise.reject(t)}return e?Promise.reject(t):t}return n(e,t).then(r.bind(null,!1),r.bind(null,!0))}function a(e,t,n){var r=e.uri+"",i=t.uujson||r.match(/[?&]_uujson(=|$)/);if(i){var o=r.replace(/[?&]_uujson(?==|$)[^&]*/,"");o+=(o.indexOf(/\?/)===-1?"?":"&")+"_uujson=",e.uri=o}return n(e,t)}function u(e,t,n){function i(e){return(e||"").replace(/[+;].*/,"").trim()}function o(e,n){if(t.transformResponse!==!1){var r=n.headers("content-type"),o=a[i(r)];try{o?n.data=o.deserialize(n.data):204===n.status&&(n.data=null)}catch(e){throw new d.Error("Error while deserializing response data.",e)}}return e?Promise.reject(n):n}var s=e.method.match(/^(put|post)$/i),a=r.contentTransformers||{},u=e.headers["content-type"];if(!("content-type"in e.headers))if(s){var l=null!=e.body&&(e.body instanceof FormData||e.body instanceof Blob||"object"==f(e.body)&&Object.keys(e.body).some(function(e){return e instanceof FormData||e instanceof Blob}));u=l?"multipart/form-data":"application/json; charset=utf-8",e.headers["content-type"]=u}else u="application/x-www-form-urlencoded";if("accept"in e.headers||(e.headers.accept="application/json"),t.transformParameters!==!1&&!s&&null!=e.body&&t.wrapQuery&&"application/x-www-form-urlencoded"==u&&(e.body={dto:JSON.stringify(e.body)}),t.transformParameters!==!1&&null!=e.body){var c=a[i(u)];try{c&&(e.body=c.serialize(e.body))}catch(e){throw new d.Error("Error while serializing data.",e)}}return n(e,t).then(o.bind(null,!1),o.bind(null,!0))}function l(e,t,n){var r;return m.PerfLog.measureSection("commandInvocation",function(i){return e.headers["x-request-id"]=i.id,r=n(e,t),r.then(function(t){return i.attributes.uri=e.uri,t},function(t){return i.attributes.uri=e.uri,Promise.reject(t)})}),r}function c(e,t,n){return Object.assign({status:e?e.status:0,headers:function(t){return t?e?e.getResponseHeader(t):null:e?e.getAllResponseHeaders():[]}},n)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(10),p=n(16),h=n(13),m=n(14),g=h.LoggerFactory.get("UuApp.AppClient.Client");r.defaults={requestTimeout:300,interceptors:[o,s,a,u,l]},r.prototype.invoke=function(e,t,n,r){function o(e,t,n,r){if(v)return Promise.reject(c(null,n,{error:new d.AbortError("The Client call has been aborted.")}));var i=t.xhr=new XMLHttpRequest;return new Promise(function(r,o){var s,a=n.method.match(/^(put|post)$/i),u=n.uri.toString();a?s=n.body:n.body&&(u+=(u.indexOf("?")==-1?"?":"&")+n.body);var l=n.headers,f=t.requestTimeout=null!=t.requestTimeout?t.requestTimeout:e.constructor.defaults.requestTimeout;g.isDebugLoggable()?g.debug("Invoking Ajax request.",{method:n.method,url:u,body:s,requestTimeout:f,headers:l}):g.isInfoLoggable()&&g.info("Invoking Ajax request.",{method:n.method,url:u}),i.open(n.method,u,!0),f>0&&(i.timeout=1e3*f),i.withCredentials=!0;for(var p in l){var h=l[p];if(p&&null!=h){if("content-type"===p&&s instanceof FormData&&"multipart/form-data"===h)continue;i.setRequestHeader(p.replace(/(^|-)./g,function(e){return e.toUpperCase()}),h+"")}}i.ontimeout=function(e){g.info("Request timed out.",{url:u}),o(c(i,n,{error:new d.TimeoutError("Request timed out - "+u)}))},i.onload=function(e){g.isDebugLoggable()?g.debug("Received response.",{url:u,status:i.status,data:i.response}):g.info("Received response.",{url:u,status:i.status}),r(c(i,n,{data:i.response}))},i.onabort=function(e){g.info("Request has been aborted.",{url:u}),o(c(i,n,{error:new d.AbortError("Request has been aborted - "+u)}))},i.onerror=function(e){g.info("Request ended with network error.",{url:u}),o(c(i,n,{error:new d.NetworkError("Network error - "+u),data:i.response}))},i.send(s)})}var s=Object.assign({},this.options,r);delete s.requestTimeout,delete s.headers,delete s.interceptors;var a,u={method:(e||"post").toLowerCase(),uri:t,body:n,headers:Object.assign({},this.options.headers,i((r||{}).headers))},l={requestTimeout:null!=(r||{}).requestTimeout?(r||{}).requestTimeout:this.options.requestTimeout},p=this.options.interceptors||this.constructor.defaults.interceptors||[],h=p.reduceRight(function(e,t){return function(n,r){var i;try{i=t(n,r,e),i&&"object"==("undefined"==typeof i?"undefined":f(i))&&"function"==typeof i.then||(i=Promise.resolve(i))}catch(e){i=Promise.reject(e)}return i.then(function(e){var i=e;return e&&"status"in e||(g.warn("Client interceptor %s resolved the promise into a value that is not a Response object - auto-wrapping.",t.name),i=a||c(null,n,r),void 0!==e&&(i.data=e)),a=i,a.error&&g.warn("Client interceptor %s resolved response successfully but kept the error object set - unsetting. Error object:",t.name,a.error),a.error=null,i},function(e){return e&&"status"in e?a=e:(a||(a=c(null,n,r)),a.error=e instanceof d.Error?e:new d.Error("Client interceptor "+t.name+" ended with error.",e)),Promise.reject(a)})}},o.bind(null,this,l)),m=h(u,s),v=!1;return m.abort=function(){v=!0,l.xhr&&l.xhr.abort()},m},r.prototype.get=function(e,t,n){return this.invoke("get",e,t,n)},r.prototype.post=function(e,t,n){return this.invoke("post",e,t,n)};var v;r.get=function(){return v||(v=new r),v.get.apply(v,arguments)},r.post=function(){return v||(v=new r),v.post.apply(v,arguments)},r.UriHandler=o,r.RemoteErrorHandler=s,r.UujsonHandler=a,r.TransformParametersHandler=u;var y={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return e?JSON.parse(e):null}},w={serialize:function(e){if(null==e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return g.warn("Unrecognized value when serializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e;var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},deserialize:function(e){if(null==e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return g.warn("Unrecognized value when deserializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e;for(var t=e.replace(/\+/g," ").split("&"),n={},r=0;r<t.length;++r){var i=t[r];i.replace(/^([^=]*)=?(.*)$/,function(e,t,r){return n[decodeURIComponent(t)]=decodeURIComponent(r)})}return n}},b={serialize:function(e){if(!e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return g.warn("Unrecognized value when serializing as multipart/form-data - passing as-is. Value:",{value:e}),e;if(e instanceof FormData&&"function"!=typeof e.entries)return e;e instanceof Blob&&(e={file:e});var t={};if(e instanceof FormData){var n=!0,r=!1,i=void 0;try{for(var o,s=e.entries()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t[a[0]]=a[1]}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}else t=e;var u=[];for(var l in t)u.push({key:l,value:t[l],i:u.length});var c=u.length;u.sort(function(e,t){return(e.value instanceof File?e.i+c:e.i)-(t.value instanceof File?t.i+c:t.i)});var d=new FormData;return u.forEach(function(e){return d.append(e.key,e.value)}),d},deserialize:function(e){throw new d.Error("Deserializing multipart/form-data is not supported. Value: "+e)}};r.contentTransformers={"application/json":y,"application/x-www-form-urlencoded":w,"multipart/form-data":b},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=n(30),o=r(i);t.Client=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){s.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o);i.prototype=Object.create(s.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){s.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o);i.prototype=Object.create(s.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){s.default.apply(this,arguments),delete this.stack}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o);i.prototype=Object.create(s.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){s.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o);i.prototype=Object.create(s.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){f||(f=o());var e=o();return f+"-"+f+"-"+e+"-0000"}function o(){for(var e=[],t=0;t<4;++t)e.push((65536*Math.random()|0).toString(16));return e.join("")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),a=r(s),u=a.default.get("UuApp.Perflog.PerfLog",!1),l={measureSection:function(e){function t(){s.close()}var n,r=arguments[arguments.length-1],o=arguments.length>2?arguments[1]:null,s=new c(i(),e,o);try{n=Promise.resolve(r(s))}catch(e){n=Promise.reject(e)}return n.then(t,t)}},c=function(e,t,n){this.id=e,this.name=t,this.attributes=n||{},this.checkpoints={},this.start=Date.now()};c.prototype.setCheckpoint=function(e){this.checkpoints[e]=Date.now},c.prototype.close=function(){this.finish||(this.finish=Date.now(),this.duration=this.finish-this.start,u.info(JSON.stringify(this)))};var f;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(29),o=r(i),s=n(27),a=r(s);if(o.default.polyfill(),Object.assign||(Object.assign=a.default),"undefined"!=typeof document&&!document.baseURI){var u=document.querySelector("base");u?document.baseURI=u.href:document.baseURI=location.href}},function(e,t,n){"use strict";function r(){var e=this,t=this;if(!(t instanceof r))return new(r.bind.apply(r,arguments));var n={parameters:{}};["scheme","hostname","vendor","app","subApp","spp","tid","awid","useCase"].forEach(function(t){var r=a["validate"+t.replace(/^./,function(e){return e.toUpperCase()})];Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){null!=e&&r(e),n[t]=null!=e?e:null}})}),Object.defineProperties(this,{port:{get:function(){return null!=n.port?Number(n.port):n.port},set:function(e){null!=e&&a.validatePort(e),n.port=null!=e?e:null}},gateway:{get:function(){return r.formatGateway(n.scheme,n.hostname,n.port)},set:function(e){var t=null!=e?a.parseGateway(e):null;n.scheme=t&&t.scheme||null,n.hostname=t&&t.hostname||null,n.port=t&&null!=t.port?t.port:null}},product:{get:function(){return r.formatProduct(n.vendor,n.app,n.subApp,n.spp)},set:function(e){var t=e?a.parseProduct(e):{};n.vendor=t.vendor||null,n.app=t.app||null,n.subApp=t.subApp||null,n.spp=t.spp||null}},workspace:{get:function(){return r.formatWorkspace(n.tid,n.awid)},set:function(e){var t=e?a.parseWorkspace(e):{};n.tid=t.tid||null,n.awid=t.awid||null}},parameters:{get:function(){return Object.assign({},n.parameters)},set:function(e){if(n.parameters={},e)for(var t in e)this.setParameter(t,e[t])}}}),this.setParameter=function(e,t){return a.validateParameterName(e),a.validateParameterValue(t),n.parameters[e]=t,this},this.deleteParameter=function(e){return a.validateParameterName(e),delete n.parameters[e],this},this.clearParameters=function(){return n.parameters={},this}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),s=n(15),a=n(39);r.prototype.parse=function(e){var t="string"==typeof e?a.parse(e,r).toUri():e;return this.gateway=t.gateway,this.product=t.product,this.workspace=t.workspace,this.useCase=t.useCase,this.parameters=t.parameters,this},r.parse=function(e){return(new r).parse(e)},r.prototype.set=function(){for(var e=0;e<arguments.length;++e){var t=arguments[e];if(t&&"object"==("undefined"==typeof t?"undefined":i(t)))for(var n in t)this[n]=t[n]}return this},r.set=function(){var e=new r;return e.set.apply(e,arguments)},["scheme","hostname","port","gateway","vendor","app","subApp","spp","product","tid","awid","workspace","useCase","parameters"].forEach(function(e){var t="set"+e.replace(/^./,function(e){return e.toUpperCase()});r.prototype[t]=function(t){return this[e]=t,this},r[t]=function(e){return(new r)[t](e)}}),r.setParameter=function(e,t){return(new r).setParameter(e,t)},r.prototype.mergeParameters=function(e){if(e)for(var t in e)this.setParameter(t,e[t]);return this},r.prototype.join=function(){var e=this.toUri();return this.parse(e.join.apply(e,arguments))};var u=s.priv;r.prototype.toUri=function(){var e=[];if(null!=this.scheme||null==this.hostname&&null==this.port||e.push("scheme"),null!=this.hostname||null==this.scheme&&null==this.port||e.push("hostname"),null!=this.vendor||null==this.subApp&&null==this.spp||e.push("vendor"),null==this.app&&e.push("app"),null==this.subApp&&null!=this.spp&&e.push("subApp"),null==this.awid&&e.push("awid"),e.length)throw new o("Missing Uri parts: "+e.join(", ")+". Values: "+this.toString());u.allowNew=!0;try{return new s(this.scheme,this.hostname,this.port,this.vendor,this.app,this.subApp,this.spp,this.tid,this.awid,this.useCase,this.parameters)}finally{u.allowNew=!1}},r.prototype.toString=function(){return r.format(this.toUri())},r.prototype.format=function(){return r.format(this.toUri())},r.format=function(e){return a.format(e)},r.formatGateway=function(e,t,n){return a.formatGateway(e,t,n)},r.formatProduct=function(e,t,n,r){return a.formatProduct(e,t,n,r)},r.formatWorkspace=function(e,t){return a.formatWorkspace(e,t)},s.prototype.Builder=r,e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r;r="string"!=typeof n?'Value "'+t+'" of URI part ['+e+"] must be "+n+" but is typeof "+("undefined"==typeof t?"undefined":i(t)):'Value "'+t+'" of URI part ['+e+"] does not match regular expression /"+n.replace(/\//g,"\\/")+"/",o.call(this,r)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),s="static|assets|public",a="[\\w\\.\\-~]",u="[a-zA-Z0-9_]",l="[\\w\\.\\-~/]",c="("+a+"+)",f="([0-9a-fA-F]{1,4})",d="(\\["+f+"(:("+f+")?){1,7}\\])",p="("+d+"|"+a+"+)",h="(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[0-5][0-9]{4}|[1-9][0-9]{0,3})",m="("+c+"://"+p+"(:"+h+")?)",g="("+u+"{1,32})",v="("+u+"{1,32})",y="("+u+"{1,32})",w="("+u+"{1,32})",b="(?=[^/]{1,131}(?:/|$))((?:"+g+"\\-)?"+v+"(?:\\-"+y+"(?:\\-"+w+")?)?)",_="("+u+"{1,32})",k="("+u+"{1,32})",O="(?=[^/\\?]{1,65}(?:/|\\?|$))((?:"+_+"\\-)?"+k+")",E="("+l+"*)",x="(?:"+a+"+)",R="(?:[^=&]*)",P="(?:"+x+"(?:="+R+")?)",S="("+P+"(?:&"+P+")*)",C=new RegExp("^(?:"+m+")?\\/"+b+"\\/"+O+"(?:/"+E+")?(?:\\?"+S+"?)?$"),T={ASSET_CLASSIFIER:s,UNRESERVED:a,IDENTIFIER:u,SCHEME:c,IPV6_PART:f,IPV6:d,HOSTNAME:p,PORT:h,GATEWAY:m,VENDOR:g,APP:v,SUB_APP:y,SPP:w,PRODUCT:b,TID:_,AWID:k,WORKSPACE:O,USE_CASE:E,PARAMETER_NAME:x,PARAMETER_VALUE:R,PARAMETER:P,PARAMETERS:S,URI_REGEXP:C,parse:function(e,t){if(!t)throw new o("UriBuilder must be provided.");var n=(e||"").match(C);if(!n)throw new o("Parse error - invalid uri: "+(e||""));var r=(new t).set({scheme:n[2],hostname:n[3],port:n[10],vendor:n[12],app:n[13],subApp:n[14],spp:n[15],tid:n[17],awid:n[18],useCase:n[19]}),i=n[20];return i&&i.split("&").forEach(function(e){if(e){var t=e.indexOf("="),n=t!=-1?e.substr(0,t):e,i=t!=-1?e.substr(t+1):"";r.setParameter(n,decodeURIComponent(i))}}),r},format:function(e){var t=[];t.push((e.gateway||"")+"/"+(e.product||"")+"/"+(e.workspace||""));var n=e.useCase;n&&("/"!=n.charAt(0)&&t.push("/"),t.push(n)),t=[t.join("").replace(/\/+$/,"")];var r=e.parameters,i=Object.keys(r);i.sort();for(var o=0;o<i.length;++o){var s=i[o];t.push(o?"&":"?"),t.push(s);var a=r[s];null!=a&&""!==a&&(t.push("="),t.push(encodeURIComponent(a)))}return t.join("")},parseGateway:function(e){if("string"!=typeof e)throw new r("gateway",e,m);var t=e.match(new RegExp("^"+m+"$"));if(!t)throw new r("gateway",e,m);return{scheme:t[2],hostname:t[3],port:t[10]}},formatGateway:function(e,t,n){return e||t||n?(T.validateScheme(e),T.validateHostname(t),null!=n&&T.validatePort(n),e+"://"+t+(null!=n?":"+n:"")):null},parseProduct:function(e){if("string"!=typeof e)throw new r("product",e,b);var t=e.match(new RegExp("^"+b+"$"));if(!t)throw new r("product",e,b);return{vendor:t[2],app:t[3],subApp:t[4],spp:t[5]}},formatProduct:function(e,t,n,r){if(!(e||t||n||r))return null;e&&T.validateVendor(e),T.validateApp(t),n&&T.validateSubApp(n),r&&T.validateSpp(r);var i=[];return e&&i.push(e+"-"),i.push(t),n&&i.push("-"+n),r&&i.push("-"+r),i.join("")},parseWorkspace:function(e){if("string"!=typeof e)throw new r("workspace",e,O);var t=e.match(new RegExp("^"+O+"$"));if(!t)throw new r("workspace",e,O);return{tid:t[2],awid:t[3]}},formatWorkspace:function(e,t){if(!e&&!t)return null;e&&T.validateTid(e),T.validateAwid(t);var n=[];return e&&n.push(e+"-"),n.push(t),n.join("")},validateScheme:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+c+"$")))throw new r("scheme",e,c)},validateHostname:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+p+"$")))throw new r("hostname",e,p)},validatePort:function(e){if(e="number"==typeof e?e+"":e,"string"!=typeof e||!e.match(new RegExp("^"+h+"$")))throw new r("port",e,h)},validateGateway:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+m+"$")))throw new r("gateway",e,m)},validateVendor:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+g+"$")))throw new r("vendor",e,g)},validateApp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+v+"$")))throw new r("app",e,v)},validateSubApp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+y+"$")))throw new r("subApp",e,y)},validateSpp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+w+"$")))throw new r("spp",e,w)},validateProduct:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+b+"$")))throw new r("product",e,b)},validateTid:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+_+"$")))throw new r("tid",e,_)},validateAwid:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+k+"$")))throw new r("awid",e,k)},validateWorkspace:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+O+"$")))throw new r("workspace",e,O)},validateUseCase:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+E+"$")))throw new r("useCase",e,E)},validateParameterName:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+x+"$")))throw new r("parameterName",e,x)},validateParameterValue:function(e){if(null!=e&&"string"!=typeof e)throw new r("parameterValue",e,String)}};r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UriBuilder=t.Uri=void 0;var i=n(15),o=r(i),s=n(38),a=r(s);t.Uri=o.default,t.UriBuilder=a.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={serverUri:"https://oidc.plus4u.net/uu-oidcg01-main/99923616732452117-4f06dafc03cb4c7f8c155aa53f0e86be",clientId:null,redirectUri:"callbacks/oidc-callback.html",sessionCheckInterval:5,sessionExpiringNotificationTime:300,tokenRefreshEnabled:!0,tokenRefreshLeeway:300,tokenRefreshFailureRetryInterval:30}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,r,i){n(this,e),this.loginOptions=t,this.authResponse=r,this.claims=i,this.getClaims=function(){return i};var o;this.getIdentity=function(){return o?o:o={id:i.sub,name:i.name,email:i.email,uuIdentity:i.uu_identity,levelOfAssurance:Number(i.loa),loginLevelOfAssurance:Number(i.acr)}}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){function r(i){if(++l>5)throw new u.Error.AbortError("Command invocation stopped because user was not able to fulfill login requirements for the command within "+l+" attempts.");var c=Object.assign({},a,i);return(Object.keys(c).length>0?o._login(c):Promise.resolve(o)).catch(function(e){if(e===!1)throw new u.Error.AbortError("Command invocation stopped because user refused to log in.");throw new u.Error.Error("Command invocation stopped because of a login error.",e)}).then(function(e){var t=e.isAuthenticated();return t?Promise.resolve(e.getCallToken()).then(function(e){return{isAuthenticated:t,callToken:e}}):{isAuthenticated:t,callToken:null}}).then(function(i){var o=i.isAuthenticated,a=i.callToken,u=a?a.token:null;return u&&(e.headers.authorization=[a.tokenType||"Bearer",u].join(" ")),n(e,t).catch(function(e){try{var t=e.headers("www-authenticate")}catch(e){console.error(e)}if(t){var n={};t.replace(/^\S+\s+/,"").split(/,/).map(function(e){return e.trim()}).forEach(function(e){var t=e.indexOf("="),r=s(t==-1?e:e.substr(0,t)),i=s(t==-1?"":e.substr(t+1));n[r]=s(i)});var i=Object.keys(n).filter(function(e){return e.match(/^(max_age|acr_values|prompt|scope)$/)}).reduce(function(e,t){return e[t]=n[t],e},{});if(Object.keys(i).length>0)return r(i);if(!o)return r({acr_values:"1"})}return Promise.reject(e)})})}var i="authorization"in e.headers;if(i)return n(e,t);var o=t.session||c.default.currentSession,a=t["uuoidc.loginParameters"];a&&(a=Object.keys(a).reduce(function(e,t){return e[d.default.toSnakeCase(t)]=a[t],e},{}));var l=0;return r(null)}function s(e){return decodeURIComponent(e.replace(/\+/g," "))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(2),u=i(a),l=n(5),c=r(l),f=n(22),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return(e||"").match(/^(https?:\/\/[^\/]+).*$/)[1]||null}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(20),u=r(a),l=n(3),c=r(l),f=n(2),d=f.Logging.LoggerFactory.get("UuOidc.SessionStateChangeNotifier"),p=function(){function e(t){i(this,e),this.session=t,this._listeners=[],this._checkState=this._checkState.bind(this),this._onMessage=this._onMessage.bind(this),this._init()}return s(e,[{key:"onStateChange",value:function(e){var t=this;return this._listeners.push(e),function(){var n=t._listeners.indexOf(e);return n!=-1&&t._listeners.splice(n,1),n!=-1}}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._stateCheckInterval&&clearInterval(this._stateCheckInterval),delete this._stateCheckInterval,window.removeEventListener("message",this._onMessage),this._listeners=[])}},{key:"_init",value:function(){var e=this;u.default.domReady.then(function(){if(!e._destroyed)return c.default.getMetadata(e.session.serverUri).then(function(t){var n=t.check_session_iframe;if(!n)return void console.error("The OpenID Connect server",e.session.serverUri,"doesn't support check_session_iframe (see",c.default.getMetadataUri(e.session.serverUri),").");d.debug("Creating iframe with check_session_iframe endpoint URL - "+n),e._iframeTrustedOrigin=o(n);var r=e._iframe=document.createElement("iframe");r.style.cssText="position: absolute;top: -300px; left: -300px; width: 200px; height: 200px; opacity: 0;",r.tabIndex="-1",r.onload=function(){return e._stateCheckAllowed=!0},r.src=n,document.body.appendChild(r),window.addEventListener("message",e._onMessage),e._stateCheckInterval=setInterval(e._checkState,1e3*e.session.sessionCheckInterval)})})}},{key:"_onMessage",value:function(e){d.debug("Received message from "+e.origin+": "+e.data),this._iframe&&e.source===this._iframe.contentWindow&&e.origin===this._iframeTrustedOrigin&&"changed"===e.data&&(d.info("Received session state change notification from OIDC iframe (message: '"+e.data+"')."),this._listeners.forEach(function(e){return e()}))}},{key:"_checkState",value:function(){if(this._stateCheckAllowed&&this._iframe){var e=(this.session._loginCtx||{}).authResponse;if(e&&e.session_state){var t=this.session.clientId+" "+e.session_state;d.debug("Querying session state change from OIDC iframe. Query: "+t),this._iframe.contentWindow.postMessage(t,this._iframeTrustedOrigin)}}}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){if(!(s.default.currentSession.isAuthenticated()||s.default.currentSession._loginInProgress>0)){
var e;return location.search.replace(/[?&]access_token=([^&#]*)/,function(t,n){e=decodeURIComponent(n.replace(/\+/g," "))}),e?s.default.currentSession._login({access_token:e,nonce:null}):s.default.currentSession._login({prompt:"none",acr_values:"1"}).catch(function(e){if(!c.default.isLoggedOutError(e))throw e})}}var o=n(5),s=r(o),a=n(20),u=r(a),l=n(6),c=r(l),f=new Function("try {return this===window;}catch(e){ return false;}")();f?u.default.domReady.then(function(){return Promise.resolve(i())}).then(s.default.initPromise._finalizeInit.bind(null,!0),s.default.initPromise._finalizeInit.bind(null,!1)):s.default.initPromise._finalizeInit(!0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),a=r(s),u=n(21),l=r(u),c={},f=0,d=function(){function e(t){if(i(this,e),!t||!t.serverUri)throw new Error("Jwks must be initialized with options containing serverUri.");this.options=t}return o(e,[{key:"getKey",value:function(e,t){return this._getKey(e,t,!1)}},{key:"_getKey",value:function(e,t,n){var r=this;return a.default.getMetadata(this.options.serverUri).then(function(e){var t=c[e.jwks_uri];if(!t||n){var r=e.jwks_uri;n&&(r=r.replace(/(\?.*)?$/,function(e){return"?cachebust="+Date.now().toString(36)+"_"+(f++).toString(36)+(e?"&"+e.substr(1):"")})),t=c[e.jwks_uri]=l.default.get(r).then(function(e){return{jwkSet:e,url:r}})}return t}).then(function(i){var o=i.jwkSet,s=o.keys;if(e&&(s=s.filter(function(t){return t.kid===e})),t&&(s=s.filter(function(e){return e.kty===t})),1!=s.length){if(!n)return r._getKey(e,t,!0);throw new Error("There's "+s.length+" JSON Web Key(s) in JWK Set with kid='"+e+"' kty='"+t+"'. There must be exactly 1. JWK Set has been downloaded from: "+i.url)}return s[0]})}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=r(i),s=n(7),a=r(s),u=n(49),l=r(u),c=n(48),f=r(c),d="undefined"!=typeof crypto&&crypto.subtle&&crypto.subtle.importKey,p=d&&("undefined"==typeof location||"https:"==location.protocol),h=p?l.default:f.default,m="RS256";t.default={decode:function(e,t,n){var r,i;return Promise.resolve().then(function(){if("string"!=typeof e)throw new Error("Invalid JSON Web Token - it must be a string (result of JWS / JWE Compact Serialization as per RFC7515 / RFC7516).");if(r=e.split("."),3!=r.length)throw new Error("Unsupported JSON Web Token - the token doesn't consist of header+body+signature (only JWS Compact Serialization is supported - RFC7515, section-3). Token: "+e);var t=r[0],s=o.default.decode(t);if(i=JSON.parse(s),"JWT"!=i.typ)throw new Error("Invalid JSON Web Token - the header 'typ' field is not set to 'JWT'. Token: "+e);return n(i)}).then(function(n){if(!n||"RSA"!=n.kty)throw new Error("Unsupported key type. Only RSA keys are supported for JSON Web Token signature verification. Key: "+JSON.stringify(n));var o=n.alg||m;if(o!==i.alg)throw new a.default("Invalid JSON Web Token or wrong verification key - algorithms don't match. Token uses '"+i.alg+"', verification key uses '"+n.alg+"' (with default of '"+m+"'). Token: "+e+" Key: "+JSON.stringify(n));return h.verify(n,o,t,i,r,e)}).then(function(t){if(!t)throw new a.default("Invalid JSON Web Token: "+e);var n=o.default.decode(r[1]),i=JSON.parse(n);return i})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(23),o=r(i),s=((o.default?o.default.uri:(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString(),a=void 0,u={verify:function(e,t,n,r,i,o){var l=this;return Promise.resolve().then(function(){if(void 0===a){var c,f=u.verify.bind(l,e,t,n,r,i,o),d=s.indexOf(".min.")!=-1,p=s.replace(/^(.*\/).*/,"$1"),h=p+"jsrsasign"+(d?".min":"")+".js";return c="undefined"!=typeof System?System.import(h):new Promise(function(e,t){var n=document.createElement("script");n.onload=function(){e(window.Jsrsasign)},n.onerror=function(e){t(e)},n.src=h,document.head.appendChild(n)}),c.then(function(e){return a=e||null,f()},function(e){return console.error(e),f()})}if(!a)throw new Error("Unable to verify token because jsrsasign library failed to load.");var m=a.KEYUTIL.getKey(e),g=a.jws.JWS.verifyJWT(o,m,n);return g||Promise.reject(new Error("Token is not valid. Token: "+o))})}};e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)}))}function o(e){return null==e?null:Array.isArray(e)?e:[e]}function s(e){return new Date(1e3*e).toISOString().replace(/T/," ")}var a=n(19),u=r(a),l=n(7),c=r(l);e.exports={verify:function(e,t,n,r,a,l){var f={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-"+t.substr(2)}},d=JSON.parse(JSON.stringify(e));return delete d.use,crypto.subtle.importKey("jwk",d,f,!1,["verify"]).then(function(e){var t=a[2],n=a[0]+"."+a[1],r=i(u.default.decodeToAscii(t)),o=i(n);return crypto.subtle.verify(e.algorithm,e,r,o)},function(e){var t=new Error("Unable to verify JSON Web Token - importing key via WebCrypto API failed.\nKey: "+JSON.stringify(d)+"\nToken: "+l+"\nError: "+e);return t.cause=e,Promise.reject(t)}).then(function(e){if(!e)throw new c.default("Invalid JSON Web Token - signature is not valid. Token: "+l);var t=u.default.decode(a[1]),i=JSON.parse(t),f=function(e,t){throw new c.default("Invalid token: "+e+"\nFailed claim: "+JSON.stringify(t)+"\nIssued by: "+JSON.stringify(i.iss)+"\nVerification options: "+JSON.stringify(n)+"\nToken: "+l)};if(!n.alg)throw new Error("Unable to verify JWT claim - 'alg' field must be always given for verification.");n.alg.indexOf(r.alg)==-1&&f("Algorithm "+JSON.stringify(r.alg)+" used by token is not valid - expected one of "+JSON.stringify(n.alg)+".","alg");var d;d=o(n.iss),d&&d.indexOf(i.iss)===-1&&f("Issuer URI "+JSON.stringify(i.iss)+" in token is not valid - expected one of "+JSON.stringify(d)+". Token was issued by different OpenID Connect server or it was forged.","iss"),d=o(n.sub),d&&d.indexOf(i.sub)===-1&&f("Subject "+JSON.stringify(i.sub)+" in token is not valid - expected one of "+JSON.stringify(d)+".","sub"),d=o(n.aud);var p=o(i.aud)||[];d&&p.some(function(e){return d.indexOf(e)==-1})&&f("Audience list "+JSON.stringify(p)+" in token is not valid - some of following values are missing: "+JSON.stringify(d)+".","aud");var h=Date.now()/1e3;n.verifyAt&&(h=n.verifyAt);var m=n.gracePeriod||0;return"number"==typeof i.exp&&i.exp+m<h&&f("Token already expired at "+s(i.exp)+", current time is "+s(h)+".","exp"),"number"==typeof i.nbf&&h<i.nbf-m&&f("Token is not yet valid - it will become valid at "+s(i.nbf)+", current time is "+s(h)+". Check that your system time is correctly set.","nbf"),"number"==typeof i.iat&&h<i.iat-m&&f("Token seems to have been issued in the future - "+s(i.iat)+", current time is "+s(h)+". Check that your system time is correctly set.","iat"),n.jti&&i.jti!==n.jti&&f("Token ID "+JSON.stringify(i.jti)+" not valid - expected "+JSON.stringify(n.jti)+".","jti"),!0})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),s=function e(t){var n=Object.assign({},t),r={loginWindow:null,closeCheckInterval:null};o.default.registerForCallback(this,r),this.finalize=function(e){this.finalize=function(){},this.destroy(),n.onResult&&n.onResult(e)}.bind(this);var i=function(){r.loginWindow&&r.loginWindow.closed&&this.finalize(!1)}.bind(this);this.render=function(){var t=this;if(!r.loginWindow){var o={width:599,height:600};o.left=(screen.availWidth-o.width)/2+screen.availLeft,o.top=(screen.availHeight-o.height)/2+screen.availTop,r.loginWindow=window.open(n.url,"_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width="+o.width+",height="+o.height+",top="+o.top+",left="+o.left),r.loginWindow?r.closeCheckInterval=setInterval(i.bind(this),200):Promise.resolve().then(function(){return t.finalize(e.ERROR_POPUP_BLOCKED)})}},this.destroy=function(){r.loginWindow&&!r.loginWindow.closed&&r.loginWindow.close(),r.closeCheckInterval&&clearInterval(r.closeCheckInterval),this.destroy=function(){},o.default.unregisterForCallback(this)}};s.ERROR_POPUP_BLOCKED="POPUP_BLOCKED",t.default=s},function(e,t){"use strict";function n(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),a=r(s),u=n(6),l=r(u),c=function(){function e(t){if(i(this,e),!(t&&t.serverUri&&t.clientId&&t.redirectUri))throw new Error("Os8Auth must be initialized with options containing serverUri, clientId and redirectUri.");this.options=t}return o(e,[{key:"grantExchangeToken",value:function(e){var t=e||{};if(!t.subject_token)throw new Error("Os8Auth.grantExchangeToken must be called with parameter subject_token.");var n=Object.assign({},t,{response_type:"id_token token",client_id:this.options.clientId,redirect_uri:this.options.redirectUri}),r=Object.keys(n).filter(function(e){return null!=n[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e]+"")}),i=this.options.serverUri.replace(/\/*$/,"/")+"exchangeOs8Token?"+r.join("&");return new Promise(function(e,t){new a.default({url:i,onResult:function(n){var r=l.default.getAuthResponseFromCallback(n);!r||r.error?t(r):e(r)}}).render()})}}]),e}();t.default=c},function(e,t){}])});
//# sourceMappingURL=uu_appg01.min.js.map