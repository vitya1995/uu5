import React from 'react';
import renderer from 'react-test-renderer';
import UU5 from "uu5g04";

const TestTools = {
  testProperty(Component, propName, values) {
    !Array.isArray(values) && (values = [values]);

    values.forEach(value => {
      let props = {};
      props[propName] = value;

      const tree = renderer.create(<Component {...props} />).toJSON();
      expect(tree).toMatchSnapshot();
    });
  },

  testDefaultProperties(Component) {
    const tree = renderer.create(<Component />).toJSON();
    expect(tree).toMatchSnapshot();
  },

  testProperties(tagName, propsConfig) {
    const Component = UU5.Common.Tools.checkTag(tagName);

    test(`${tagName} default props`, () => {
      TestTools.testDefaultProperties(Component);
    });

    for (let propName in propsConfig) {
      test(`${tagName} prop ${propName}`, () => {
        TestTools.testProperty(Component, propName, propsConfig[propName].values);
      });
    }
  }
};

export default TestTools;