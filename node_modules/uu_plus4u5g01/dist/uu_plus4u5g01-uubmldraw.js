/*! UAF Licence for the uu5 software.

Copyright (c) 2016-present, Unicorn a.s.
All rights reserved.

Definitions
-----------
This licence agreement is based on the original "BSD Licence" published by
the Regents of the University of California in 1990.

The term "Software" means the uu5 package, its modules, components,
all program files, source code, examples, media, and documentation which are part
of the Software package, as well as any portion of them. The term "Author" means
Unicorn a.s. and all its subsidiaries and/or affiliates.

Licence Agreement
-----------------

Redistribution and use of this Software in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.

3. All derivative products containing user interface must display the following
   acknowledgement in the appropriate "About window" or website section accessible
   by all users of the product:

     This product includes following software developed by
     <a href="https://unicorn.com">Unicorn a.s.</a>:
     <a href="https://uuos9.plus4u.net/uu-dockitg01-main/78462435-86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
     <a href="https://uuos9.plus4u.net/uu-dockitg01-main/78462435-ed11ec379073476db0aa295ad6c00178/book">uu5</a>.

4. All derivative products must not block the default uu5 browser console message containing
   Software version information and copyright notice of the Author.

5. The use of any portion of this Software is not allowed in the products
   that fully or partially resemble the functionality of the Software
   or otherwise compete with the Software unless they are licenced under the same licence
   conditions and provided free of charge. Specific prior written permission is required otherwise.

6. Neither the name of the Author nor the names of its contributors
   may be used to endorse or promote products derived from this software
   without specific prior written permission.

Disclaimer
----------
THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("uu5g04"), require("uu_plus4u5g01"), require("react"), require("create-react-class"), require("prop-types"), require("uu5g04-bricks"), require("module"), require("uu_appg01_core"), require("uu_appg01"));
	else if(typeof define === 'function' && define.amd)
		define("UuBmlDraw", ["uu5g04", "uu_plus4u5g01", "react", "create-react-class", "prop-types", "uu5g04-bricks", "module", "uu_appg01_core", "uu_appg01"], factory);
	else if(typeof exports === 'object')
		exports["UuBmlDraw"] = factory(require("uu5g04"), require("uu_plus4u5g01"), require("react"), require("create-react-class"), require("prop-types"), require("uu5g04-bricks"), require("module"), require("uu_appg01_core"), require("uu_appg01"));
	else
		root["Plus4U5"] = root["Plus4U5"] || {}, root["Plus4U5"]["UuBmlDraw"] = factory(root["UU5"], root["Plus4U5"], root["React"], root["createReactClass"], root["PropTypes"], root["UU5.Bricks"], root["undefined"], root["UuApp"], root["UuApp"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 8);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!***************************************************************************************!*\
  !*** external {"amd":"uu5g04","commonjs":"uu5g04","commonjs2":"uu5g04","root":"UU5"} ***!
  \***************************************************************************************/
/*! no static exports found */
/*! exports used: Bricks, Common, Environment */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_0__;

/***/ }),
/* 1 */
/*!****************************************************************************************************************!*\
  !*** external {"amd":"uu_plus4u5g01","commonjs":"uu_plus4u5g01","commonjs2":"uu_plus4u5g01","root":"Plus4U5"} ***!
  \****************************************************************************************************************/
/*! no static exports found */
/*! exports used: Environment, default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/*!**************************************************************************************!*\
  !*** external {"amd":"react","commonjs":"react","commonjs2":"react","root":"React"} ***!
  \**************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/*!****************************************************************************************************************************************!*\
  !*** external {"amd":"create-react-class","commonjs":"create-react-class","commonjs2":"create-react-class","root":"createReactClass"} ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/*!*********************************************************************************************************!*\
  !*** external {"amd":"prop-types","commonjs":"prop-types","commonjs2":"prop-types","root":"PropTypes"} ***!
  \*********************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_4__;

/***/ }),
/* 5 */
/*!*******************************************************************************************************************!*\
  !*** external {"amd":"uu5g04-bricks","commonjs":"uu5g04-bricks","commonjs2":"uu5g04-bricks","root":"UU5.Bricks"} ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ }),
/* 6 */
/*!**************************************************!*\
  !*** ../node_modules/css-loader/lib/css-base.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function (useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if (item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function (modules, mediaQuery) {
		if (typeof modules === "string") modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for (var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if (typeof id === "number") alreadyImportedModules[id] = true;
		}
		for (i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if (typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if (mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if (mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}

/***/ }),
/* 7 */
/*!*****************************************************!*\
  !*** ../node_modules/style-loader/lib/addStyles.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getElement = (function (fn) {
	var memo = {};

	return function(selector) {
		if (typeof memo[selector] === "undefined") {
			memo[selector] = fn.call(this, selector);
		}

		return memo[selector]
	};
})(function (target) {
	return document.querySelector(target)
});

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(/*! ./urls */ 15);

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton) options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
	if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else {
		throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	options.attrs.type = "text/css";

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	options.attrs.type = "text/css";
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = options.transform(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),
/* 8 */
/*!********************************************!*\
  !*** ../.tmp/uubmldraw/uubmldraw-build.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

var mod = __webpack_require__(/*! module */ 9);
var uri = ((mod ? mod.uri : (document.currentScript || Array.prototype.slice.call(document.getElementsByTagName("script"), -1)[0] || {}).src) || "").toString();
__webpack_require__.p = uri.split(/\//).slice(0, -1).join("/") + "/"; // runtime publicPath configuration required for proper linking of styles, background images, ...
module.exports = __webpack_require__(/*! __project__/uubmldraw/uubmldraw-build.js */ 10);

/***/ }),
/* 9 */
/*!*********************************************************************************************!*\
  !*** external {"amd":"module","commonjs":"module","commonjs2":"module","root":"undefined"} ***!
  \*********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_9__;

/***/ }),
/* 10 */
/*!**************************************************!*\
  !*** ./uubmldraw/uubmldraw-build.js + 5 modules ***!
  \**************************************************/
/*! exports provided: default, Image */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ../.tmp/uubmldraw/uubmldraw-build.js (referenced with cjs require) */
/*! ModuleConcatenation bailout: Cannot concat with external {"amd":"uu_plus4u5g01","commonjs":"uu_plus4u5g01","commonjs2":"uu_plus4u5g01","root":"Plus4U5"} (<- Module is not an ECMAScript module) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
var uubmldraw_namespaceObject = {};
__webpack_require__.d(uubmldraw_namespaceObject, "Image", function() { return Image; });

// EXTERNAL MODULE: external {"amd":"uu_plus4u5g01","commonjs":"uu_plus4u5g01","commonjs2":"uu_plus4u5g01","root":"Plus4U5"}
var external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5__ = __webpack_require__(1);
var external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5___default = /*#__PURE__*/__webpack_require__.n(external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5__);

// EXTERNAL MODULE: external {"amd":"react","commonjs":"react","commonjs2":"react","root":"React"}
var external___amd___react___commonjs___react___commonjs2___react___root___React__ = __webpack_require__(2);
var external___amd___react___commonjs___react___commonjs2___react___root___React___default = /*#__PURE__*/__webpack_require__.n(external___amd___react___commonjs___react___commonjs2___react___root___React__);

// EXTERNAL MODULE: external {"amd":"create-react-class","commonjs":"create-react-class","commonjs2":"create-react-class","root":"createReactClass"}
var external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass__ = __webpack_require__(3);
var external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass___default = /*#__PURE__*/__webpack_require__.n(external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass__);

// EXTERNAL MODULE: external {"amd":"prop-types","commonjs":"prop-types","commonjs2":"prop-types","root":"PropTypes"}
var external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes__ = __webpack_require__(4);
var external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default = /*#__PURE__*/__webpack_require__.n(external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes__);

// EXTERNAL MODULE: external {"amd":"uu5g04","commonjs":"uu5g04","commonjs2":"uu5g04","root":"UU5"}
var external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__ = __webpack_require__(0);
var external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5___default = /*#__PURE__*/__webpack_require__.n(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__);

// EXTERNAL MODULE: external {"amd":"uu5g04-bricks","commonjs":"uu5g04-bricks","commonjs2":"uu5g04-bricks","root":"UU5.Bricks"}
var external___amd___uu5g04_bricks___commonjs___uu5g04_bricks___commonjs2___uu5g04_bricks___root___UU5_Bricks__ = __webpack_require__(5);
var external___amd___uu5g04_bricks___commonjs___uu5g04_bricks___commonjs2___uu5g04_bricks___root___UU5_Bricks___default = /*#__PURE__*/__webpack_require__.n(external___amd___uu5g04_bricks___commonjs___uu5g04_bricks___commonjs2___uu5g04_bricks___root___UU5_Bricks__);

// EXTERNAL MODULE: external {"amd":"uu_appg01_core","commonjs":"uu_appg01_core","commonjs2":"uu_appg01_core","root":"UuApp"}
var external___amd___uu_appg01_core___commonjs___uu_appg01_core___commonjs2___uu_appg01_core___root___UuApp__ = __webpack_require__(11);
var external___amd___uu_appg01_core___commonjs___uu_appg01_core___commonjs2___uu_appg01_core___root___UuApp___default = /*#__PURE__*/__webpack_require__.n(external___amd___uu_appg01_core___commonjs___uu_appg01_core___commonjs2___uu_appg01_core___root___UuApp__);

// EXTERNAL MODULE: external {"amd":"uu_appg01","commonjs":"uu_appg01","commonjs2":"uu_appg01","root":"UuApp"}
var external___amd___uu_appg01___commonjs___uu_appg01___commonjs2___uu_appg01___root___UuApp__ = __webpack_require__(12);
var external___amd___uu_appg01___commonjs___uu_appg01___commonjs2___uu_appg01___root___UuApp___default = /*#__PURE__*/__webpack_require__.n(external___amd___uu_appg01___commonjs___uu_appg01___commonjs2___uu_appg01___root___UuApp__);

// CONCATENATED MODULE: ./uubmldraw/calls.js
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };





var Calls = {

  call: function call(method, url, params, dtoIn) {
    //let call = () => {
    external___amd___uu_appg01___commonjs___uu_appg01___commonjs2___uu_appg01___root___UuApp__["Client"][method](url, dtoIn.data).then(function (response) {
      // add logged user identity information
      response = response || {};
      response.data = response.data || {};

      dtoIn.done(response.data);
    }, function (response) {
      // add logged user identity information
      response = response || {};
      response.data = response.data || {};

      dtoIn.fail(response);
    });
  },

  loadDiagram: function loadDiagram(dtoIn) {
    var tidAwid = dtoIn.data.tidAwid || dtoIn.tidAwid;
    delete dtoIn.data.tidAwid;
    var commandUri = Calls.getCommandUri('loadDiagram', tidAwid);
    Calls.call("post", commandUri.toString(), null, dtoIn);
  },
  lock: function lock(dtoIn) {
    var tidAwid = dtoIn.data.tidAwid || dtoIn.tidAwid;
    delete dtoIn.data.tidAwid;
    var commandUri = Calls.getCommandUri('lock', tidAwid);
    Calls.call("post", commandUri.toString(), null, dtoIn);
  },


  getCommandUri: function getCommandUri(useCase, tidAwid, params) {
    !tidAwid && external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].Tools.error("tidAwid was not set for useCase " + useCase + ".", { useCase: useCase });
    useCase = useCase.match(/^\//) ? useCase : "/" + useCase;

    // TODO baseUri from some constant / config?
    var baseUri = "https://uuos9.plus4u.net/uu-uubmldrawg03-main/" + tidAwid + "/";
    // let baseUri = `http://localhost:6221/uu-uubmldraw-main/${tidAwid}/`;

    var uriBuilder = external___amd___uu_appg01_core___commonjs___uu_appg01_core___commonjs2___uu_appg01_core___root___UuApp__["Uri"].UriBuilder.parse(baseUri).setUseCase(useCase);
    if (params && (typeof params === "undefined" ? "undefined" : _typeof(params)) === 'object') {
      for (var key in params) {
        uriBuilder.setParameter(key, params[key]);
      }
    }

    return uriBuilder.toUri();
  }

};

/* harmony default export */ var calls = (Calls);
// EXTERNAL MODULE: ./uubmldraw/image/image.css
var image_image = __webpack_require__(13);
var image_default = /*#__PURE__*/__webpack_require__.n(image_image);

// CONCATENATED MODULE: ./uubmldraw/image/image-loader.js
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();










var ImageLoader = external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass___default()({
  displayName: 'ImageLoader',


  //@@viewOn:mixins
  mixins: [external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].BaseMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].ElementaryMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].LsiMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].LoadMixin],
  //@@viewOff:mixins

  //@@viewOn:statics
  statics: {
    tagName: 'Plus4U5.UuBmlDraw.ImageLoader',
    classNames: {
      main: 'plus4u5-uubmldraw-image',
      modal: 'plus4u5-uubmldraw-image-modal',
      button: 'plus4u5-uubmldraw-image-button uu5-elevation-2',
      inProgress: 'plus4u5-uubmldraw-image-inprogress',
      img: 'plus4u5-uubmldraw-image-img uu5-elevation-0',
      imageWrapper: "plus4u5-uubmldraw-image-image-wrapper"
    },
    defaults: {
      width: 250,
      height: 150,
      locked: 'mdi-lock-outline',
      editable: 'mdi-lead-pencil',
      inProgress: external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5__["Environment"].basePath + 'uubmldraw/assets/in-progress.png',
      placeholder: external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5__["Environment"].basePath + 'uubmldraw/assets/placeholder.png'
    },
    calls: {
      onLoad: "loadDiagram",
      lock: "lock"
    },
    lsi: {
      tooltip: {
        cs: "Editovat",
        en: "Edit"
      },
      lockedAlert: {
        cs: "Editor je uzamčen uživatelem %s (%s)",
        en: "The editor is currently locked by %s (%s)"
      }
    }
  },
  //@@viewOff:statics

  //@@viewOn:propTypes
  propTypes: {
    tidAwid: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string.isRequired,
    code: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string.isRequired,
    readOnly: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.bool
  },
  //@@viewOff:propTypes

  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      tidAwid: null,
      readOnly: false
    };
  },

  //@@viewOff:getDefaultProps

  //@@viewOn:standardComponentLifeCycle
  componentWillMount: function componentWillMount() {
    this.setCalls(calls);
  },
  componentWillUnmount: function componentWillUnmount() {
    external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Environment"].EventListener.removeWindowEvent('message', this.getId());
    return this;
  },

  //@@viewOff:standardComponentLifeCycle

  //@@viewOn:interface
  edit: function edit() {
    var _this = this;

    if (this.editor) {
      this.editor.focus();
    } else {
      this.getCall('lock')({
        tidAwid: this.props.tidAwid,
        data: {
          code: this.props.code
        },

        done: function done(dtoOut) {
          _this._handleLock(dtoOut);
          _this.setState({ dtoOut: dtoOut });
        },

        fail: function fail(failDtoOut) {
          console.error(failDtoOut);
        }
      });
    }
    return this;
  },
  showAlert: function showAlert() {
    var dtoOut = this.getDtoOut();
    var lock = dtoOut.lock || {};
    this._alertBus.addAlert({
      content: this.getLsiComponent('lockedAlert', null, [lock.author, lock.uuIdentity]),
      colorSchema: 'warning'
    });
    return this;
  },
  showImage: function showImage() {
    this._modal.open({
      content: external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Image, { src: this._buildImgSrc() })
    });
    return this;
  },

  //@@viewOff:interface

  //@@viewOn:overridingMethods
  onLoadError_: function onLoadError_(dtoOut) {
    this.setState({ loadFeedback: "error" });
  },
  getOnLoadData_: function getOnLoadData_() {
    return {
      code: this.props.code,
      tidAwid: this.props.tidAwid
    };
  },


  //@@viewOff:overridingMethods

  //@@viewOn:componentSpecificHelpers
  _receiveMessage: function _receiveMessage(event) {
    // ((event.origin !== "http://localhost:6221"))
    if (event.origin !== "https://uuos9.plus4u.net") return event;
    try {
      var _event$data$split = event.data.split("."),
          _event$data$split2 = _slicedToArray(_event$data$split, 2),
          code = _event$data$split2[0],
          message = _event$data$split2[1];

      if (code === this.props.code) {
        switch (message) {
          case "unlock":
            this.editor = null;
            this.reload();
            external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Environment"].EventListener.removeWindowEvent('message', this.getId());
        }
      }
    } catch (e) {
      console.error(e);
    }
  },
  _handleButtonClick: function _handleButtonClick() {
    this.edit();
  },
  _handleLock: function _handleLock(dtoOut) {
    if (dtoOut.lock) {
      var url = calls.getCommandUri('editor', this.props.tidAwid, {
        code: this.props.code,
        inProgress: (!!dtoOut.inProgress).toString(),
        image: (!!dtoOut.image).toString()
      }).toString();
      this.editor = window.open(url);
      external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Environment"].EventListener.addWindowEvent('message', this.getId(), this._receiveMessage);
    } else {
      this.showAlert();
    }
  },
  _getButtonTooltip: function _getButtonTooltip() {
    var lock = this.getDtoOut().lock || {};
    if (lock.uuIdentity) {
      return lock.author + '\n' + lock.uuIdentity;
    }
  },
  _getCorrectIcon: function _getCorrectIcon() {
    var lock = this.getDtoOut().lock;
    var def = this.getDefault();
    return (!!lock && Object.keys(lock).length) > 0 ? def.locked : def.editable;
  },
  _buildButtonAttrs: function _buildButtonAttrs() {
    var _this2 = this;

    var attrs = {
      className: this.getClassName().button,
      hidden: true,
      size: "xl",
      ref_: function ref_(button) {
        return _this2._button = button;
      },
      onClick: function onClick(button, e) {
        e.stopPropagation();
        _this2.edit();
      }
    };
    var tooltip = this._getButtonTooltip();
    tooltip && (attrs.tooltip = tooltip);
    return attrs;
  },
  _buildModalAttrs: function _buildModalAttrs() {
    var _this3 = this;

    return {
      header: this.getDtoOut().name || " ",
      className: this.getClassName().modal,
      ref_: function ref_(modal) {
        _this3._modal = modal;
      }
    };
  },
  _buildImgSrc: function _buildImgSrc() {
    return this.getDtoOut().imgUrl || this.getDefault().placeholder;
  },
  _buildImageAttrs: function _buildImageAttrs() {
    var _this4 = this;

    return {
      src: this._buildImgSrc(),
      className: this.getClassName().img,
      ref_: function ref_(image) {
        return _this4._image = image;
      }
    };
  },
  _onMouseOverHandler: function _onMouseOverHandler() {
    !this.getDtoOut().readOnly && this._button.show();
  },
  _onMouseOutHandler: function _onMouseOutHandler() {
    this._button.hide();
  },
  _buildInProgressBar: function _buildInProgressBar() {
    if (this.getDtoOut().inProgress) {
      return external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Image, this._buildInProgressProps());
    }
  },
  _buildInProgressProps: function _buildInProgressProps() {
    return {
      className: this.getClassName().inProgress,
      src: this.getDefault().inProgress
    };
  },

  //@@viewOff:componentSpecificHelpers

  //@@viewOn:render
  render: function render() {
    var _this5 = this;

    return this.getLoadFeedbackChildren(function () {
      return external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(
        'div',
        _extends({}, _this5.getMainAttrs(), {
          onMouseOver: function onMouseOver() {
            return _this5._onMouseOverHandler();
          },
          onMouseOut: function onMouseOut() {
            return _this5._onMouseOutHandler();
          }
        }),
        external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Modal, _this5._buildModalAttrs()),
        external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].AlertBus, { ref_: function ref_(alert) {
            return _this5._alertBus = alert;
          } }),
        external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(
          'div',
          { onClick: function onClick() {
              return _this5.showImage();
            }, className: _this5.getClassName().imageWrapper },
          _this5._buildInProgressBar(),
          external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Image, _this5._buildImageAttrs()),
          external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(
            external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Button,
            _this5._buildButtonAttrs(),
            external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Icon, { icon: _this5._getCorrectIcon() })
          )
        )
      );
    });
  }
  //@@viewOff:render

});

/* harmony default export */ var image_loader = (ImageLoader);
// EXTERNAL MODULE: ./uubmldraw/image/image-legacy.css
var image_legacy = __webpack_require__(16);
var image_legacy_default = /*#__PURE__*/__webpack_require__.n(image_legacy);

// CONCATENATED MODULE: ./uubmldraw/image/image-legacy.js









var ImageLegacy = external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass___default()({
  displayName: 'ImageLegacy',


  //@@viewOn:mixins
  mixins: [external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].BaseMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].ElementaryMixin],
  //@@viewOff:mixins

  //@@viewOn:statics
  statics: {
    tagName: 'Plus4U5.UuBmlDraw.ImageLegacy_',
    classNames: {
      main: 'plus4u5-uubmldraw-image plus4u5-uubmldraw-image-legacy',
      modal: 'plus4u5-uubmldraw-image-modal-legacy',
      iframe: 'plus4u5-uubmldraw-image-iframe-legacy'
    },
    defaults: {
      width: 250,
      height: 150,
      contentUrl: "https://widget.plus4u.net/%s/uu-uubmldraw/getContent?referrerUri=%s&uuid=%s&uuAT=Bearer %s&readOnly=%s",
      sheetUri: "ues:VPH-BT[29537617]:UUAPPKNH/PORTAL[44191581396036005]:50946987294721227[50946987294721227]"
    }
  },
  //@@viewOff:statics

  //@@viewOn:propTypes
  propTypes: {
    sheetUri: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string.isRequired,
    code: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string.isRequired,
    readOnly: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.bool,
    inProgress: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.bool,
    userIdentity: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string,
    userName: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string
  },
  //@@viewOff:propTypes

  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      readOnly: false,
      inProgress: false,
      userIdentity: null,
      userName: null
    };
  },

  //@@viewOff:getDefaultProps

  //@@viewOn:standardComponentLifeCycle
  componentDidMount: function componentDidMount() {
    window.uuBMLDraw = window.uuBMLDraw || {};
    uuBMLDraw[this.props.code] = uuBMLDraw[this.props.code] || {};
    uuBMLDraw.initStack = uuBMLDraw.initStack || [];
    external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Environment"].EventListener.addWindowEvent('message', this.getId(), this._receiveMessage);
  },
  componentWillUnmount: function componentWillUnmount() {
    external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Environment"].EventListener.removeWindowEvent('message', this.getId());
    delete uuBMLDraw[this.props.code];
  },

  //@@viewOff:standardComponentLifeCycle

  //@@viewOn:interface
  showImage: function showImage() {
    if (uuBMLDraw[this.props.code] && uuBMLDraw[this.props.code].image) {
      this._modal.open({
        content: external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Image, { src: uuBMLDraw[this.props.code].image })
      });
    }
  },

  //@@viewOff:interface

  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods

  //@@viewOn:componentSpecificHelpers
  _getIframeProps: function _getIframeProps() {
    var _this = this;

    return {
      className: this.getClassName().iframe,
      src: this._buildSrc(),
      inline: true,
      resize: true,
      ref_: function ref_(iframe) {
        return _this._iframe = iframe;
      },
      iframeAttrs: {
        name: this.getId()
      }
    };
  },
  _buildSrc: function _buildSrc() {
    var sheetUri = this.props.sheetUri || this.getDefault().sheetUri;
    return external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].Tools.formatString(this.getDefault().contentUrl, [this._getTerritoryCode(sheetUri), sheetUri, this.props.code, external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5__["Environment"].getToken(), this.props.readOnly]);
  },
  _getTerritoryCode: function _getTerritoryCode(uri) {
    var matcher = uri.match(/:([A-Z0-9-]+)/);
    return matcher[1];
  },
  _receiveMessage: function _receiveMessage(event) {
    var message = event.data;

    var widgetData = uuBMLDraw[this.props.code] || {};

    if (message.name === this.getId()) {
      switch (message.type) {
        case 'setDimensions':
        case 'restoreDimensions':
          this._iframe.setSize(message.width, message.height + 10);
          break;
        case 'setImage':
          var img = message.base64;
          widgetData.image = img;
          this._iframe.setSize(message.width, message.height + 10);
          break;
        case 'showImages':
          this.showImage();
          break;
        default:
          break;
      }
    }
  },

  //@@viewOff:componentSpecificHelpers

  //@@viewOn:render
  render: function render() {
    var _this2 = this;

    return external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(
      'div',
      this.getMainAttrs(),
      external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Modal, {
        parent: this,
        header: ' ',
        ref_: function ref_(modal) {
          return _this2._modal = modal;
        },
        className: this.getClassName().modal
      }),
      external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Iframe, this._getIframeProps())
    );
  }
  //@@viewOff:render

});

/* harmony default export */ var image_image_legacy = (ImageLegacy);
// CONCATENATED MODULE: ./uubmldraw/image/image.js








var Image = external___amd___create_react_class___commonjs___create_react_class___commonjs2___create_react_class___root___createReactClass___default()({
  displayName: 'Image',


  //@@viewOn:mixins
  mixins: [external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].BaseMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].ElementaryMixin, external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Common"].IdentityMixin],
  //@@viewOff:mixins

  //@@viewOn:statics
  statics: {
    tagName: 'Plus4U5.UuBmlDraw.Image',
    lsi: {
      codeError: {
        cs: "Chybí povinná vlastnost 'code'!",
        en: "Required property 'code' is missing!"
      }
    }
  },
  //@@viewOff:statics

  //@@viewOn:propTypes
  propTypes: {
    code: external___amd___prop_types___commonjs___prop_types___commonjs2___prop_types___root___PropTypes___default.a.string.isRequired
  },
  //@@viewOff:propTypes

  //@@viewOn:getDefaultProps
  //@@viewOff:getDefaultProps

  //@@viewOn:standardComponentLifeCycle
  //@@viewOff:standardComponentLifeCycle

  //@@viewOn:interface
  //@@viewOff:interface

  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods

  //@@viewOn:componentSpecificHelpers
  _getCorrectChild: function _getCorrectChild() {
    if (!this.props.code) return external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(external___amd___uu5g04___commonjs___uu5g04___commonjs2___uu5g04___root___UU5__["Bricks"].Error, { content: this.getLsiComponent("codeError") });

    var identity = this.getIdentity();
    var props = Object.assign({}, this.props, { userIdentity: identity.uuIdentity, userName: identity.name });
    return this.props.tidAwid ? external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(image_loader, props) : external___amd___react___commonjs___react___commonjs2___react___root___React___default.a.createElement(image_image_legacy, props);
  },

  //@@viewOff:componentSpecificHelpers

  //@@viewOn:render
  render: function render() {
    var _this = this;

    return this.getAuthenticatedChild(function () {
      return _this._getCorrectChild();
    }, { silent: true, inline: true });
  }
  //@@viewOff:render

});

/* harmony default export */ var uubmldraw_image_image = (Image);
// CONCATENATED MODULE: ./uubmldraw/uubmldraw.js

// CONCATENATED MODULE: ./uubmldraw/uubmldraw-build.js
/* concated harmony reexport */__webpack_require__.d(__webpack_exports__, "Image", function() { return Image; });




/* harmony default export */ var uubmldraw_build = __webpack_exports__["default"] = (uubmldraw_namespaceObject);

// merge into Plus4U5
// NOTE "plus4u5" must ensure that the key already exists there, otherwise following usage wouldn't work:
for (var k in uubmldraw_namespaceObject) {
  external___amd___uu_plus4u5g01___commonjs___uu_plus4u5g01___commonjs2___uu_plus4u5g01___root___Plus4U5___default.a.UuBmlDraw[k] = uubmldraw_namespaceObject[k];
}

/***/ }),
/* 11 */
/*!*****************************************************************************************************************!*\
  !*** external {"amd":"uu_appg01_core","commonjs":"uu_appg01_core","commonjs2":"uu_appg01_core","root":"UuApp"} ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/*! exports used: Uri */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_11__;

/***/ }),
/* 12 */
/*!**************************************************************************************************!*\
  !*** external {"amd":"uu_appg01","commonjs":"uu_appg01","commonjs2":"uu_appg01","root":"UuApp"} ***!
  \**************************************************************************************************/
/*! no static exports found */
/*! exports used: Client */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_12__;

/***/ }),
/* 13 */
/*!***********************************!*\
  !*** ./uubmldraw/image/image.css ***!
  \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../node_modules/css-loader??ref--0-oneOf-1-1!./image.css */ 14);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ 7)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js??ref--0-oneOf-1-1!./image.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js??ref--0-oneOf-1-1!./image.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 14 */
/*!*********************************************************************************!*\
  !*** ../node_modules/css-loader?{"minimize":false}!./uubmldraw/image/image.css ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ 6)(undefined);
// imports


// module
exports.push([module.i, ".plus4u5-uubmldraw-image :hover {\r\n  cursor: pointer;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-modal {\r\n  text-align: center;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-image-wrapper {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-modal .uu5-bricks-modal-dialog {\r\n  width: auto;\r\n  display: inline-block;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-button {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-button .uu5-bricks-icon {\r\n  opacity: 0.54;\r\n  font-size: 30px;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-inprogress {\r\n  position: absolute ;\r\n  top: 0;\r\n  right: 0;\r\n  width: 200px\r\n}\r\n", ""]);

// exports


/***/ }),
/* 15 */
/*!************************************************!*\
  !*** ../node_modules/style-loader/lib/urls.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
	// get current location
	var location = typeof window !== "undefined" && window.location;

	if (!location) {
		throw new Error("fixUrls requires window.location");
	}

	// blank or null?
	if (!css || typeof css !== "string") {
		return css;
	}

	var baseUrl = location.protocol + "//" + location.host;
	var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
 This regular expression is just a way to recursively match brackets within
 a string.
 	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
    (  = Start a capturing group
      (?:  = Start a non-capturing group
          [^)(]  = Match anything that isn't a parentheses
          |  = OR
          \(  = Match a start parentheses
              (?:  = Start another non-capturing groups
                  [^)(]+  = Match anything that isn't a parentheses
                  |  = OR
                  \(  = Match a start parentheses
                      [^)(]*  = Match anything that isn't a parentheses
                  \)  = Match a end parentheses
              )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
  \)  = Match a close parens
 	 /gi  = Get all matches, not the first.  Be case insensitive.
  */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function (fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl.trim().replace(/^"(.*)"$/, function (o, $1) {
			return $1;
		}).replace(/^'(.*)'$/, function (o, $1) {
			return $1;
		});

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl)) {
			return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
			//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};

/***/ }),
/* 16 */
/*!******************************************!*\
  !*** ./uubmldraw/image/image-legacy.css ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../node_modules/css-loader??ref--0-oneOf-1-1!./image-legacy.css */ 17);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ 7)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js??ref--0-oneOf-1-1!./image-legacy.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js??ref--0-oneOf-1-1!./image-legacy.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 17 */
/*!****************************************************************************************!*\
  !*** ../node_modules/css-loader?{"minimize":false}!./uubmldraw/image/image-legacy.css ***!
  \****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ 6)(undefined);
// imports


// module
exports.push([module.i, ".plus4u5-uubmldraw-image-modal-legacy .uu5-bricks-modal-dialog {\r\n text-align: center;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-modal-legacy .uu5-bricks-image-responsive{\r\n  display: inline-block;\r\n}\r\n\r\n.plus4u5-uubmldraw-image-iframe-legacy {\r\n  -webkit-overflow-scrolling: touch;\r\n  overflow-y: hidden;\r\n  overflow-x: auto;\r\n}\r\n", ""]);

// exports


/***/ })
/******/ ]);
});
//# sourceMappingURL=uu_plus4u5g01-uubmldraw.js.map